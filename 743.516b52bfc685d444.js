(self.webpackChunkclient1=self.webpackChunkclient1||[]).push([[743],{5743:(i,h,e)=>{"use strict";e.r(h),e.d(h,{demoRoutes:()=>ne});var t=e(4650),s=e(5861),r=e(7579),c=e(6063);class n extends r.x{constructor(M=1/0,w=1/0,k=c.l){super(),this._bufferSize=M,this._windowTime=w,this._timestampProvider=k,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=w===1/0,this._bufferSize=Math.max(1,M),this._windowTime=Math.max(1,w)}next(M){const{isStopped:w,_buffer:k,_infiniteTimeWindow:W,_timestampProvider:z,_windowTime:$}=this;w||(k.push(M),!W&&k.push(z.now()+$)),this._trimBuffer(),super.next(M)}_subscribe(M){this._throwIfClosed(),this._trimBuffer();const w=this._innerSubscribe(M),{_infiniteTimeWindow:k,_buffer:W}=this,z=W.slice();for(let $=0;$<z.length&&!M.closed;$+=k?1:2)M.next(z[$]);return this._checkFinalizedStatuses(M),w}_trimBuffer(){const{_bufferSize:M,_timestampProvider:w,_buffer:k,_infiniteTimeWindow:W}=this,z=(W?1:2)*M;if(M<1/0&&z<k.length&&k.splice(0,k.length-z),!W){const $=w.now();let te=0;for(let ie=1;ie<k.length&&k[ie]<=$;ie+=2)te=ie;te&&k.splice(0,te+1)}}}var l=e(1135),E=e(4671),x=e(4482),d=e(5403);function p(T,M){return T===M}var v=e(9300),_=e(1214),u=e(529);let f=(()=>{class T{constructor(w){this._oAuthService=w,this._loggedInSrc=new n(1),this._userProfileSrc=new l.X(null),this.loggedIn$=this._loggedInSrc.pipe(function A(T,M=E.y){return T=T??p,(0,x.e)((w,k)=>{let W,z=!0;w.subscribe(new d.Q(k,$=>{const te=M($);(z||!T(W,te))&&(z=!1,W=te,k.next($))}))})}()),this.userProfile$=this._userProfileSrc.asObservable(),this.init()}logIn(){this._oAuthService.initLoginFlowInPopup()}logOut(w=!1){w?this._oAuthService.revokeTokenAndLogout(!0,!0):this._oAuthService.logOut(!0),this._loggedInSrc.next(!1)}getAccessToken(){return this._oAuthService.getAccessToken()}init(){var w=this;return(0,s.Z)(function*(){yield w._oAuthService.loadDiscoveryDocument(),yield w._oAuthService.tryLoginImplicitFlow(),w._loggedInSrc.next(w._oAuthService.hasValidIdToken()&&w._oAuthService.hasValidAccessToken()),w._oAuthService.events.pipe((0,v.h)(k=>"token_received"===k.type)).subscribe(()=>w._loggedInSrc.next(!0)),w.loggedIn$.pipe((0,v.h)(k=>k)).subscribe(()=>w._oAuthService.loadUserProfile().then(k=>{(T=>T.info instanceof Object)(k)&&w._userProfileSrc.next(k.info)}))})()}}return T.\u0275fac=function(w){return new(w||T)(t.LFG(_.Ct))},T.\u0275prov=t.Yz7({token:T,factory:T.\u0275fac}),T})(),C=(()=>{class T{constructor(w,k){if(!w)throw new Error("You should import GoogleIdentityModule.forConfig()");k.configure(w)}static forAuthConfig(w){return{ngModule:T,providers:[{provide:_.FD,useFactory:()=>this.createAuthConfig(w)}]}}static createAuthConfig(w){let k=window.location.origin+window.location.pathname;return k.endsWith("/")&&(k=k.substring(0,k.length-1)),{issuer:"https://accounts.google.com",strictDiscoveryDocumentValidation:!1,redirectUri:k,silentRefreshRedirectUri:k+"/silent-refresh.html",useSilentRefresh:!0,clientId:w.clientId,scope:w.scopes instanceof Array?w.scopes.filter(W=>W).join(" "):w.scopes,showDebugInformation:w.debug}}}return T.\u0275fac=function(w){return new(w||T)(t.LFG(_.FD,8),t.LFG(_.Ct))},T.\u0275mod=t.oAB({type:T}),T.\u0275inj=t.cJS({providers:[f],imports:[u.JF,_.zr.forRoot()]}),T})();var P=e(2911),S=e(6895);function O(){return T=>T.pipe((0,v.h)(M=>null!=M))}var D=e(3099);function F(T,M,w){var k,W;let z,$=!1;return T&&"object"==typeof T?(z=null!==(k=T.bufferSize)&&void 0!==k?k:1/0,M=null!==(W=T.windowTime)&&void 0!==W?W:1/0,$=!!T.refCount,w=T.scheduler):z=T??1/0,(0,D.B)({connector:()=>new n(z,M,w),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:$})}var U=e(4004);const L=function(){return{marginLeft:"5px",padding:"2px",color:"white",backgroundColor:"green"}};function R(T,M){if(1&T&&(t.ynx(0),t.TgZ(1,"span",3),t._uU(2,"Connected"),t.qZA(),t._UZ(3,"hr")(4,"img",4),t.ALo(5,"async"),t.BQk()),2&T){const w=t.oxw();t.xp6(1),t.Q6J("ngStyle",t.DdM(4,L)),t.xp6(3),t.Q6J("src",t.lcZ(5,2,w.picture$),t.LSH)}}const B=function(){return{marginLeft:"5px",padding:"2px",color:"white",backgroundColor:"red"}};function Q(T,M){1&T&&(t.TgZ(0,"span",3),t._uU(1,"Disconnected"),t.qZA()),2&T&&t.Q6J("ngStyle",t.DdM(1,B))}let Z=(()=>{class T{constructor(w){this._googleIdentityService=w,this.connected$=this._googleIdentityService.loggedIn$.pipe(F(1)),this.picture$=this._googleIdentityService.userProfile$.pipe(O(),function V(...T){const M=T.length;if(0===M)throw new Error("list of properties cannot be empty.");return(0,U.U)(w=>{let k=w;for(let W=0;W<M;W++){const z=k?.[T[W]];if(!(typeof z<"u"))return;k=z}return k})}("picture"),O(),F(1))}logIn(){this._googleIdentityService.logIn()}logOff(w=!1){this._googleIdentityService.logOut(w)}}return T.\u0275fac=function(w){return new(w||T)(t.Y36(f))},T.\u0275cmp=t.Xpm({type:T,selectors:[["app-demo"]],standalone:!0,features:[t.jDz],decls:10,vars:6,consts:[[3,"click"],[4,"ngIf"],[3,"ngStyle",4,"ngIf"],[3,"ngStyle"],[3,"src"]],template:function(w,k){1&w&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return k.logIn()}),t._uU(1,"Login"),t.qZA(),t.TgZ(2,"button",0),t.NdJ("click",function(){return k.logOff()}),t._uU(3,"Logoff"),t.qZA(),t.TgZ(4,"button",0),t.NdJ("click",function(){return k.logOff(!0)}),t._uU(5,"Revoke and Logoff"),t.qZA(),t.YNc(6,R,6,5,"ng-container",1),t.ALo(7,"async"),t.YNc(8,Q,2,2,"span",2),t.ALo(9,"async")),2&w&&(t.xp6(6),t.Q6J("ngIf",t.lcZ(7,2,k.connected$)),t.xp6(2),t.Q6J("ngIf",!1===t.lcZ(9,4,k.connected$)))},dependencies:[S.ez,S.O5,S.PC,S.Ov],encapsulation:2}),T})();const ne=[{path:"",providers:[(0,t.RIp)(C.forAuthConfig({clientId:P.N.CLIENT_ID,scopes:["openid","profile","email","https://www.googleapis.com/auth/drive.file"]}))],component:Z}]},1302:function(i,h,e){var t;!function(s,r){var c={};!function(s){"use strict";s.__esModule=!0,s.digestLength=32,s.blockSize=64;var r=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function c(_,u,b,f,C){for(var P,S,O,D,F,U,V,L,R,B,Q,Z,ee;C>=64;){for(P=u[0],S=u[1],O=u[2],D=u[3],F=u[4],U=u[5],V=u[6],L=u[7],B=0;B<16;B++)_[B]=(255&b[Q=f+4*B])<<24|(255&b[Q+1])<<16|(255&b[Q+2])<<8|255&b[Q+3];for(B=16;B<64;B++)_[B]=((Z=((R=_[B-2])>>>17|R<<15)^(R>>>19|R<<13)^R>>>10)+_[B-7]|0)+((ee=((R=_[B-15])>>>7|R<<25)^(R>>>18|R<<14)^R>>>3)+_[B-16]|0);for(B=0;B<64;B++)Z=(((F>>>6|F<<26)^(F>>>11|F<<21)^(F>>>25|F<<7))+(F&U^~F&V)|0)+(L+(r[B]+_[B]|0)|0)|0,ee=((P>>>2|P<<30)^(P>>>13|P<<19)^(P>>>22|P<<10))+(P&S^P&O^S&O)|0,L=V,V=U,U=F,F=D+Z|0,D=O,O=S,S=P,P=Z+ee|0;u[0]+=P,u[1]+=S,u[2]+=O,u[3]+=D,u[4]+=F,u[5]+=U,u[6]+=V,u[7]+=L,f+=64,C-=64}return f}var n=function(){function _(){this.digestLength=s.digestLength,this.blockSize=s.blockSize,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}return _.prototype.reset=function(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this},_.prototype.clean=function(){for(var u=0;u<this.buffer.length;u++)this.buffer[u]=0;for(u=0;u<this.temp.length;u++)this.temp[u]=0;this.reset()},_.prototype.update=function(u,b){if(void 0===b&&(b=u.length),this.finished)throw new Error("SHA256: can't update because hash was finished.");var f=0;if(this.bytesHashed+=b,this.bufferLength>0){for(;this.bufferLength<64&&b>0;)this.buffer[this.bufferLength++]=u[f++],b--;64===this.bufferLength&&(c(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(b>=64&&(f=c(this.temp,this.state,u,f,b),b%=64);b>0;)this.buffer[this.bufferLength++]=u[f++],b--;return this},_.prototype.finish=function(u){if(!this.finished){var b=this.bytesHashed,f=this.bufferLength,C=b/536870912|0,P=b<<3,S=b%64<56?64:128;this.buffer[f]=128;for(var O=f+1;O<S-8;O++)this.buffer[O]=0;this.buffer[S-8]=C>>>24&255,this.buffer[S-7]=C>>>16&255,this.buffer[S-6]=C>>>8&255,this.buffer[S-5]=C>>>0&255,this.buffer[S-4]=P>>>24&255,this.buffer[S-3]=P>>>16&255,this.buffer[S-2]=P>>>8&255,this.buffer[S-1]=P>>>0&255,c(this.temp,this.state,this.buffer,0,S),this.finished=!0}for(O=0;O<8;O++)u[4*O+0]=this.state[O]>>>24&255,u[4*O+1]=this.state[O]>>>16&255,u[4*O+2]=this.state[O]>>>8&255,u[4*O+3]=this.state[O]>>>0&255;return this},_.prototype.digest=function(){var u=new Uint8Array(this.digestLength);return this.finish(u),u},_.prototype._saveState=function(u){for(var b=0;b<this.state.length;b++)u[b]=this.state[b]},_.prototype._restoreState=function(u,b){for(var f=0;f<this.state.length;f++)this.state[f]=u[f];this.bytesHashed=b,this.finished=!1,this.bufferLength=0},_}();s.Hash=n;var l=function(){function _(u){this.inner=new n,this.outer=new n,this.blockSize=this.inner.blockSize,this.digestLength=this.inner.digestLength;var b=new Uint8Array(this.blockSize);if(u.length>this.blockSize)(new n).update(u).finish(b).clean();else for(var f=0;f<u.length;f++)b[f]=u[f];for(f=0;f<b.length;f++)b[f]^=54;for(this.inner.update(b),f=0;f<b.length;f++)b[f]^=106;for(this.outer.update(b),this.istate=new Uint32Array(8),this.ostate=new Uint32Array(8),this.inner._saveState(this.istate),this.outer._saveState(this.ostate),f=0;f<b.length;f++)b[f]=0}return _.prototype.reset=function(){return this.inner._restoreState(this.istate,this.inner.blockSize),this.outer._restoreState(this.ostate,this.outer.blockSize),this},_.prototype.clean=function(){for(var u=0;u<this.istate.length;u++)this.ostate[u]=this.istate[u]=0;this.inner.clean(),this.outer.clean()},_.prototype.update=function(u){return this.inner.update(u),this},_.prototype.finish=function(u){return this.outer.finished?this.outer.finish(u):(this.inner.finish(u),this.outer.update(u,this.digestLength).finish(u)),this},_.prototype.digest=function(){var u=new Uint8Array(this.digestLength);return this.finish(u),u},_}();function E(_){var u=(new n).update(_),b=u.digest();return u.clean(),b}function x(_,u){var b=new l(_).update(u),f=b.digest();return b.clean(),f}function d(_,u,b,f){var C=f[0];if(0===C)throw new Error("hkdf: cannot expand more");u.reset(),C>1&&u.update(_),b&&u.update(b),u.update(f),u.finish(_),f[0]++}s.HMAC=l,s.hash=E,s.default=E,s.hmac=x;var A=new Uint8Array(s.digestLength);s.hkdf=function p(_,u,b,f){void 0===u&&(u=A),void 0===f&&(f=32);for(var C=new Uint8Array([1]),P=x(u,_),S=new l(P),O=new Uint8Array(S.digestLength),D=O.length,F=new Uint8Array(f),U=0;U<f;U++)D===O.length&&(d(O,S,b,C),D=0),F[U]=O[D++];return S.clean(),O.fill(0),C.fill(0),F},s.pbkdf2=function v(_,u,b,f){for(var C=new l(_),P=C.digestLength,S=new Uint8Array(4),O=new Uint8Array(P),D=new Uint8Array(P),F=new Uint8Array(f),U=0;U*P<f;U++){var V=U+1;S[0]=V>>>24&255,S[1]=V>>>16&255,S[2]=V>>>8&255,S[3]=V>>>0&255,C.reset(),C.update(u),C.update(S),C.finish(D);for(var L=0;L<P;L++)O[L]=D[L];for(L=2;L<=b;L++){C.reset(),C.update(D).finish(D);for(var R=0;R<P;R++)O[R]^=D[R]}for(L=0;L<P&&U*P+L<f;L++)F[U*P+L]=O[L]}for(U=0;U<P;U++)O[U]=D[U]=0;for(U=0;U<4;U++)S[U]=0;return C.clean(),F}}(c);var n=c.default;for(var l in c)n[l]=c[l];"object"==typeof i.exports?i.exports=n:void 0!==(t=function(){return n}.call(c,e,c,i))&&(i.exports=t)}()},102:(i,h,e)=>{"use strict";e.d(h,{S:()=>l});var t=e(8306),s=e(8421);const{isArray:r}=Array;var n=e(5403);function l(...x){return 1===(x=function c(x){return 1===x.length&&r(x[0])?x[0]:x}(x)).length?(0,s.Xf)(x[0]):new t.y(function E(x){return d=>{let A=[];for(let p=0;A&&!d.closed&&p<x.length;p++)A.push((0,s.Xf)(x[p]).subscribe(new n.Q(d,v=>{if(A){for(let _=0;_<A.length;_++)_!==p&&A[_].unsubscribe();A=null}d.next(v)})))}}(x))}},8372:(i,h,e)=>{"use strict";e.d(h,{b:()=>c});var t=e(4049),s=e(4482),r=e(5403);function c(n,l=t.z){return(0,s.e)((E,x)=>{let d=null,A=null,p=null;const v=()=>{if(d){d.unsubscribe(),d=null;const u=A;A=null,x.next(u)}};function _(){const u=p+n,b=l.now();if(b<u)return d=this.schedule(void 0,u-b),void x.add(d);v()}E.subscribe(new r.Q(x,u=>{A=u,p=l.now(),d||(d=l.schedule(_,n),x.add(d))},()=>{v(),x.complete()},void 0,()=>{A=d=null}))})}},1756:(i,h,e)=>{"use strict";e.d(h,{g:()=>b});var t=e(4049),s=e(7272),r=e(5698),c=e(4482),n=e(5403),l=e(5032),x=e(9718),d=e(5577);function A(f,C){return C?P=>(0,s.z)(C.pipe((0,r.q)(1),function E(){return(0,c.e)((f,C)=>{f.subscribe(new n.Q(C,l.Z))})}()),P.pipe(A(f))):(0,d.z)((P,S)=>f(P,S).pipe((0,r.q)(1),(0,x.h)(P)))}var p=e(8306),v=e(3532),_=e(1165);function b(f,C=t.z){const P=function u(f=0,C,P=t.P){let S=-1;return null!=C&&((0,v.K)(C)?P=C:S=C),new p.y(O=>{let D=(0,_.q)(f)?+f-P.now():f;D<0&&(D=0);let F=0;return P.schedule(function(){O.closed||(O.next(F++),0<=S?this.schedule(void 0,S):O.complete())},D)})}(f,C);return A(()=>P)}},7414:(i,h,e)=>{"use strict";e.d(h,{V:()=>d});var t=e(4049),s=e(1165),r=e(4482),c=e(8421),n=e(3888),l=e(5403),E=e(9672);const x=(0,n.d)(p=>function(_=null){p(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=_});function d(p,v){const{first:_,each:u,with:b=A,scheduler:f=v??t.z,meta:C=null}=(0,s.q)(p)?{first:p}:"number"==typeof p?{each:p}:p;if(null==_&&null==u)throw new TypeError("No timeout provided.");return(0,r.e)((P,S)=>{let O,D,F=null,U=0;const V=L=>{D=(0,E.f)(S,f,()=>{try{O.unsubscribe(),(0,c.Xf)(b({meta:C,lastValue:F,seen:U})).subscribe(S)}catch(R){S.error(R)}},L)};O=P.subscribe(new l.Q(S,L=>{D?.unsubscribe(),U++,S.next(F=L),u>0&&V(u)},void 0,void 0,()=>{D?.closed||D?.unsubscribe(),F=null})),V(null!=_?"number"==typeof _?_:+_-f.now():u)})}function A(p){throw new x(p)}},4049:(i,h,e)=>{"use strict";e.d(h,{P:()=>A,z:()=>d});var t=e(727);class s extends t.w0{constructor(v,_){super()}schedule(v,_=0){return this}}const r={setInterval(...p){const{delegate:v}=r;return(v?.setInterval||setInterval)(...p)},clearInterval(p){const{delegate:v}=r;return(v?.clearInterval||clearInterval)(p)},delegate:void 0};var c=e(8737),l=e(6063);class E{constructor(v,_=E.now){this.schedulerActionCtor=v,this.now=_}schedule(v,_=0,u){return new this.schedulerActionCtor(this,v).schedule(u,_)}}E.now=l.l.now;const d=new class x extends E{constructor(v,_=E.now){super(v,_),this.actions=[],this._active=!1,this._scheduled=void 0}flush(v){const{actions:_}=this;if(this._active)return void _.push(v);let u;this._active=!0;do{if(u=v.execute(v.state,v.delay))break}while(v=_.shift());if(this._active=!1,u){for(;v=_.shift();)v.unsubscribe();throw u}}}(class n extends s{constructor(v,_){super(v,_),this.scheduler=v,this.work=_,this.pending=!1}schedule(v,_=0){if(this.closed)return this;this.state=v;const u=this.id,b=this.scheduler;return null!=u&&(this.id=this.recycleAsyncId(b,u,_)),this.pending=!0,this.delay=_,this.id=this.id||this.requestAsyncId(b,this.id,_),this}requestAsyncId(v,_,u=0){return r.setInterval(v.flush.bind(v,this),u)}recycleAsyncId(v,_,u=0){if(null!=u&&this.delay===u&&!1===this.pending)return _;r.clearInterval(_)}execute(v,_){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const u=this._execute(v,_);if(u)return u;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(v,_){let b,u=!1;try{this.work(v)}catch(f){u=!0,b=f||new Error("Scheduled action threw falsy error")}if(u)return this.unsubscribe(),b}unsubscribe(){if(!this.closed){const{id:v,scheduler:_}=this,{actions:u}=_;this.work=this.state=this.scheduler=null,this.pending=!1,(0,c.P)(u,this),null!=v&&(this.id=this.recycleAsyncId(_,v,null)),this.delay=null,super.unsubscribe()}}}),A=d},6063:(i,h,e)=>{"use strict";e.d(h,{l:()=>t});const t={now:()=>(t.delegate||Date).now(),delegate:void 0}},1165:(i,h,e)=>{"use strict";function t(s){return s instanceof Date&&!isNaN(s)}e.d(h,{q:()=>t})},529:(i,h,e)=>{"use strict";e.d(h,{JF:()=>ve,LE:()=>C,TP:()=>w,WM:()=>A,eN:()=>T});var t=e(6895),s=e(4650),r=e(9646),c=e(8306),n=e(4351),l=e(9300),E=e(4004);class x{}class d{}class A{constructor(o){this.normalizedNames=new Map,this.lazyUpdate=null,o?this.lazyInit="string"==typeof o?()=>{this.headers=new Map,o.split("\n").forEach(a=>{const y=a.indexOf(":");if(y>0){const m=a.slice(0,y),I=m.toLowerCase(),j=a.slice(y+1).trim();this.maybeSetNormalizedName(m,I),this.headers.has(I)?this.headers.get(I).push(j):this.headers.set(I,[j])}})}:()=>{this.headers=new Map,Object.keys(o).forEach(a=>{let y=o[a];const m=a.toLowerCase();"string"==typeof y&&(y=[y]),y.length>0&&(this.headers.set(m,y),this.maybeSetNormalizedName(a,m))})}:this.headers=new Map}has(o){return this.init(),this.headers.has(o.toLowerCase())}get(o){this.init();const a=this.headers.get(o.toLowerCase());return a&&a.length>0?a[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(o){return this.init(),this.headers.get(o.toLowerCase())||null}append(o,a){return this.clone({name:o,value:a,op:"a"})}set(o,a){return this.clone({name:o,value:a,op:"s"})}delete(o,a){return this.clone({name:o,value:a,op:"d"})}maybeSetNormalizedName(o,a){this.normalizedNames.has(a)||this.normalizedNames.set(a,o)}init(){this.lazyInit&&(this.lazyInit instanceof A?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(o=>this.applyUpdate(o)),this.lazyUpdate=null))}copyFrom(o){o.init(),Array.from(o.headers.keys()).forEach(a=>{this.headers.set(a,o.headers.get(a)),this.normalizedNames.set(a,o.normalizedNames.get(a))})}clone(o){const a=new A;return a.lazyInit=this.lazyInit&&this.lazyInit instanceof A?this.lazyInit:this,a.lazyUpdate=(this.lazyUpdate||[]).concat([o]),a}applyUpdate(o){const a=o.name.toLowerCase();switch(o.op){case"a":case"s":let y=o.value;if("string"==typeof y&&(y=[y]),0===y.length)return;this.maybeSetNormalizedName(o.name,a);const m=("a"===o.op?this.headers.get(a):void 0)||[];m.push(...y),this.headers.set(a,m);break;case"d":const I=o.value;if(I){let j=this.headers.get(a);if(!j)return;j=j.filter(X=>-1===I.indexOf(X)),0===j.length?(this.headers.delete(a),this.normalizedNames.delete(a)):this.headers.set(a,j)}else this.headers.delete(a),this.normalizedNames.delete(a)}}forEach(o){this.init(),Array.from(this.normalizedNames.keys()).forEach(a=>o(this.normalizedNames.get(a),this.headers.get(a)))}}class p{encodeKey(o){return b(o)}encodeValue(o){return b(o)}decodeKey(o){return decodeURIComponent(o)}decodeValue(o){return decodeURIComponent(o)}}const _=/%(\d[a-f0-9])/gi,u={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function b(g){return encodeURIComponent(g).replace(_,(o,a)=>u[a]??o)}function f(g){return`${g}`}class C{constructor(o={}){if(this.updates=null,this.cloneFrom=null,this.encoder=o.encoder||new p,o.fromString){if(o.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function v(g,o){const a=new Map;return g.length>0&&g.replace(/^\?/,"").split("&").forEach(m=>{const I=m.indexOf("="),[j,X]=-1==I?[o.decodeKey(m),""]:[o.decodeKey(m.slice(0,I)),o.decodeValue(m.slice(I+1))],H=a.get(j)||[];H.push(X),a.set(j,H)}),a}(o.fromString,this.encoder)}else o.fromObject?(this.map=new Map,Object.keys(o.fromObject).forEach(a=>{const y=o.fromObject[a],m=Array.isArray(y)?y.map(f):[f(y)];this.map.set(a,m)})):this.map=null}has(o){return this.init(),this.map.has(o)}get(o){this.init();const a=this.map.get(o);return a?a[0]:null}getAll(o){return this.init(),this.map.get(o)||null}keys(){return this.init(),Array.from(this.map.keys())}append(o,a){return this.clone({param:o,value:a,op:"a"})}appendAll(o){const a=[];return Object.keys(o).forEach(y=>{const m=o[y];Array.isArray(m)?m.forEach(I=>{a.push({param:y,value:I,op:"a"})}):a.push({param:y,value:m,op:"a"})}),this.clone(a)}set(o,a){return this.clone({param:o,value:a,op:"s"})}delete(o,a){return this.clone({param:o,value:a,op:"d"})}toString(){return this.init(),this.keys().map(o=>{const a=this.encoder.encodeKey(o);return this.map.get(o).map(y=>a+"="+this.encoder.encodeValue(y)).join("&")}).filter(o=>""!==o).join("&")}clone(o){const a=new C({encoder:this.encoder});return a.cloneFrom=this.cloneFrom||this,a.updates=(this.updates||[]).concat(o),a}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(o=>this.map.set(o,this.cloneFrom.map.get(o))),this.updates.forEach(o=>{switch(o.op){case"a":case"s":const a=("a"===o.op?this.map.get(o.param):void 0)||[];a.push(f(o.value)),this.map.set(o.param,a);break;case"d":if(void 0===o.value){this.map.delete(o.param);break}{let y=this.map.get(o.param)||[];const m=y.indexOf(f(o.value));-1!==m&&y.splice(m,1),y.length>0?this.map.set(o.param,y):this.map.delete(o.param)}}}),this.cloneFrom=this.updates=null)}}class S{constructor(){this.map=new Map}set(o,a){return this.map.set(o,a),this}get(o){return this.map.has(o)||this.map.set(o,o.defaultValue()),this.map.get(o)}delete(o){return this.map.delete(o),this}has(o){return this.map.has(o)}keys(){return this.map.keys()}}function D(g){return typeof ArrayBuffer<"u"&&g instanceof ArrayBuffer}function F(g){return typeof Blob<"u"&&g instanceof Blob}function U(g){return typeof FormData<"u"&&g instanceof FormData}class L{constructor(o,a,y,m){let I;if(this.url=a,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=o.toUpperCase(),function O(g){switch(g){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||m?(this.body=void 0!==y?y:null,I=m):I=y,I&&(this.reportProgress=!!I.reportProgress,this.withCredentials=!!I.withCredentials,I.responseType&&(this.responseType=I.responseType),I.headers&&(this.headers=I.headers),I.context&&(this.context=I.context),I.params&&(this.params=I.params)),this.headers||(this.headers=new A),this.context||(this.context=new S),this.params){const j=this.params.toString();if(0===j.length)this.urlWithParams=a;else{const X=a.indexOf("?");this.urlWithParams=a+(-1===X?"?":X<a.length-1?"&":"")+j}}else this.params=new C,this.urlWithParams=a}serializeBody(){return null===this.body?null:D(this.body)||F(this.body)||U(this.body)||function V(g){return typeof URLSearchParams<"u"&&g instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof C?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||U(this.body)?null:F(this.body)?this.body.type||null:D(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof C?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(o={}){const a=o.method||this.method,y=o.url||this.url,m=o.responseType||this.responseType,I=void 0!==o.body?o.body:this.body,j=void 0!==o.withCredentials?o.withCredentials:this.withCredentials,X=void 0!==o.reportProgress?o.reportProgress:this.reportProgress;let H=o.headers||this.headers,G=o.params||this.params;const oe=o.context??this.context;return void 0!==o.setHeaders&&(H=Object.keys(o.setHeaders).reduce((se,q)=>se.set(q,o.setHeaders[q]),H)),o.setParams&&(G=Object.keys(o.setParams).reduce((se,q)=>se.set(q,o.setParams[q]),G)),new L(a,y,I,{params:G,headers:H,context:oe,reportProgress:X,responseType:m,withCredentials:j})}}var R=(()=>((R=R||{})[R.Sent=0]="Sent",R[R.UploadProgress=1]="UploadProgress",R[R.ResponseHeader=2]="ResponseHeader",R[R.DownloadProgress=3]="DownloadProgress",R[R.Response=4]="Response",R[R.User=5]="User",R))();class B{constructor(o,a=200,y="OK"){this.headers=o.headers||new A,this.status=void 0!==o.status?o.status:a,this.statusText=o.statusText||y,this.url=o.url||null,this.ok=this.status>=200&&this.status<300}}class Q extends B{constructor(o={}){super(o),this.type=R.ResponseHeader}clone(o={}){return new Q({headers:o.headers||this.headers,status:void 0!==o.status?o.status:this.status,statusText:o.statusText||this.statusText,url:o.url||this.url||void 0})}}class Z extends B{constructor(o={}){super(o),this.type=R.Response,this.body=void 0!==o.body?o.body:null}clone(o={}){return new Z({body:void 0!==o.body?o.body:this.body,headers:o.headers||this.headers,status:void 0!==o.status?o.status:this.status,statusText:o.statusText||this.statusText,url:o.url||this.url||void 0})}}class ee extends B{constructor(o){super(o,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${o.url||"(unknown url)"}`:`Http failure response for ${o.url||"(unknown url)"}: ${o.status} ${o.statusText}`,this.error=o.error||null}}function ne(g,o){return{body:o,headers:g.headers,context:g.context,observe:g.observe,params:g.params,reportProgress:g.reportProgress,responseType:g.responseType,withCredentials:g.withCredentials}}let T=(()=>{class g{constructor(a){this.handler=a}request(a,y,m={}){let I;if(a instanceof L)I=a;else{let H,G;H=m.headers instanceof A?m.headers:new A(m.headers),m.params&&(G=m.params instanceof C?m.params:new C({fromObject:m.params})),I=new L(a,y,void 0!==m.body?m.body:null,{headers:H,context:m.context,params:G,reportProgress:m.reportProgress,responseType:m.responseType||"json",withCredentials:m.withCredentials})}const j=(0,r.of)(I).pipe((0,n.b)(H=>this.handler.handle(H)));if(a instanceof L||"events"===m.observe)return j;const X=j.pipe((0,l.h)(H=>H instanceof Z));switch(m.observe||"body"){case"body":switch(I.responseType){case"arraybuffer":return X.pipe((0,E.U)(H=>{if(null!==H.body&&!(H.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return H.body}));case"blob":return X.pipe((0,E.U)(H=>{if(null!==H.body&&!(H.body instanceof Blob))throw new Error("Response is not a Blob.");return H.body}));case"text":return X.pipe((0,E.U)(H=>{if(null!==H.body&&"string"!=typeof H.body)throw new Error("Response is not a string.");return H.body}));default:return X.pipe((0,E.U)(H=>H.body))}case"response":return X;default:throw new Error(`Unreachable: unhandled observe type ${m.observe}}`)}}delete(a,y={}){return this.request("DELETE",a,y)}get(a,y={}){return this.request("GET",a,y)}head(a,y={}){return this.request("HEAD",a,y)}jsonp(a,y){return this.request("JSONP",a,{params:(new C).append(y,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(a,y={}){return this.request("OPTIONS",a,y)}patch(a,y,m={}){return this.request("PATCH",a,ne(m,y))}post(a,y,m={}){return this.request("POST",a,ne(m,y))}put(a,y,m={}){return this.request("PUT",a,ne(m,y))}}return g.\u0275fac=function(a){return new(a||g)(s.LFG(x))},g.\u0275prov=s.Yz7({token:g,factory:g.\u0275fac}),g})();class M{constructor(o,a){this.next=o,this.interceptor=a}handle(o){return this.interceptor.intercept(o,this.next)}}const w=new s.OlP("HTTP_INTERCEPTORS");let k=(()=>{class g{intercept(a,y){return y.handle(a)}}return g.\u0275fac=function(a){return new(a||g)},g.\u0275prov=s.Yz7({token:g,factory:g.\u0275fac}),g})();const fe=/^\)\]\}',?\n/;let ue=(()=>{class g{constructor(a){this.xhrFactory=a}handle(a){if("JSONP"===a.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new c.y(y=>{const m=this.xhrFactory.build();if(m.open(a.method,a.urlWithParams),a.withCredentials&&(m.withCredentials=!0),a.headers.forEach((N,J)=>m.setRequestHeader(N,J.join(","))),a.headers.has("Accept")||m.setRequestHeader("Accept","application/json, text/plain, */*"),!a.headers.has("Content-Type")){const N=a.detectContentTypeHeader();null!==N&&m.setRequestHeader("Content-Type",N)}if(a.responseType){const N=a.responseType.toLowerCase();m.responseType="json"!==N?N:"text"}const I=a.serializeBody();let j=null;const X=()=>{if(null!==j)return j;const N=m.statusText||"OK",J=new A(m.getAllResponseHeaders()),re=function pe(g){return"responseURL"in g&&g.responseURL?g.responseURL:/^X-Request-URL:/m.test(g.getAllResponseHeaders())?g.getResponseHeader("X-Request-URL"):null}(m)||a.url;return j=new Q({headers:J,status:m.status,statusText:N,url:re}),j},H=()=>{let{headers:N,status:J,statusText:re,url:_e}=X(),Y=null;204!==J&&(Y=typeof m.response>"u"?m.responseText:m.response),0===J&&(J=Y?200:0);let le=J>=200&&J<300;if("json"===a.responseType&&"string"==typeof Y){const ye=Y;Y=Y.replace(fe,"");try{Y=""!==Y?JSON.parse(Y):null}catch(Ae){Y=ye,le&&(le=!1,Y={error:Ae,text:Y})}}le?(y.next(new Z({body:Y,headers:N,status:J,statusText:re,url:_e||void 0})),y.complete()):y.error(new ee({error:Y,headers:N,status:J,statusText:re,url:_e||void 0}))},G=N=>{const{url:J}=X(),re=new ee({error:N,status:m.status||0,statusText:m.statusText||"Unknown Error",url:J||void 0});y.error(re)};let oe=!1;const se=N=>{oe||(y.next(X()),oe=!0);let J={type:R.DownloadProgress,loaded:N.loaded};N.lengthComputable&&(J.total=N.total),"text"===a.responseType&&!!m.responseText&&(J.partialText=m.responseText),y.next(J)},q=N=>{let J={type:R.UploadProgress,loaded:N.loaded};N.lengthComputable&&(J.total=N.total),y.next(J)};return m.addEventListener("load",H),m.addEventListener("error",G),m.addEventListener("timeout",G),m.addEventListener("abort",G),a.reportProgress&&(m.addEventListener("progress",se),null!==I&&m.upload&&m.upload.addEventListener("progress",q)),m.send(I),y.next({type:R.Sent}),()=>{m.removeEventListener("error",G),m.removeEventListener("abort",G),m.removeEventListener("load",H),m.removeEventListener("timeout",G),a.reportProgress&&(m.removeEventListener("progress",se),null!==I&&m.upload&&m.upload.removeEventListener("progress",q)),m.readyState!==m.DONE&&m.abort()}})}}return g.\u0275fac=function(a){return new(a||g)(s.LFG(t.JF))},g.\u0275prov=s.Yz7({token:g,factory:g.\u0275fac}),g})();const ae=new s.OlP("XSRF_COOKIE_NAME"),ce=new s.OlP("XSRF_HEADER_NAME");class de{}let ge=(()=>{class g{constructor(a,y,m){this.doc=a,this.platform=y,this.cookieName=m,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const a=this.doc.cookie||"";return a!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,t.Mx)(a,this.cookieName),this.lastCookieString=a),this.lastToken}}return g.\u0275fac=function(a){return new(a||g)(s.LFG(t.K0),s.LFG(s.Lbi),s.LFG(ae))},g.\u0275prov=s.Yz7({token:g,factory:g.\u0275fac}),g})(),he=(()=>{class g{constructor(a,y){this.tokenService=a,this.headerName=y}intercept(a,y){const m=a.url.toLowerCase();if("GET"===a.method||"HEAD"===a.method||m.startsWith("http://")||m.startsWith("https://"))return y.handle(a);const I=this.tokenService.getToken();return null!==I&&!a.headers.has(this.headerName)&&(a=a.clone({headers:a.headers.set(this.headerName,I)})),y.handle(a)}}return g.\u0275fac=function(a){return new(a||g)(s.LFG(de),s.LFG(ce))},g.\u0275prov=s.Yz7({token:g,factory:g.\u0275fac}),g})(),me=(()=>{class g{constructor(a,y){this.backend=a,this.injector=y,this.chain=null}handle(a){if(null===this.chain){const y=this.injector.get(w,[]);this.chain=y.reduceRight((m,I)=>new M(m,I),this.backend)}return this.chain.handle(a)}}return g.\u0275fac=function(a){return new(a||g)(s.LFG(d),s.LFG(s.zs3))},g.\u0275prov=s.Yz7({token:g,factory:g.\u0275fac}),g})(),Ee=(()=>{class g{static disable(){return{ngModule:g,providers:[{provide:he,useClass:k}]}}static withOptions(a={}){return{ngModule:g,providers:[a.cookieName?{provide:ae,useValue:a.cookieName}:[],a.headerName?{provide:ce,useValue:a.headerName}:[]]}}}return g.\u0275fac=function(a){return new(a||g)},g.\u0275mod=s.oAB({type:g}),g.\u0275inj=s.cJS({providers:[he,{provide:w,useExisting:he,multi:!0},{provide:de,useClass:ge},{provide:ae,useValue:"XSRF-TOKEN"},{provide:ce,useValue:"X-XSRF-TOKEN"}]}),g})(),ve=(()=>{class g{}return g.\u0275fac=function(a){return new(a||g)},g.\u0275mod=s.oAB({type:g}),g.\u0275inj=s.cJS({providers:[T,{provide:x,useClass:me},ue,{provide:d,useExisting:ue}],imports:[Ee.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),g})()},1214:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Ct:()=>OAuthService,FD:()=>AUTH_CONFIG,zr:()=>OAuthModule});var C_Projects_am4it_drive_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5861),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4650),_angular_common__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(6895),_angular_common_http__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(529),rxjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(7579),rxjs__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(9646),rxjs__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(2076),rxjs__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(102),rxjs__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(2843),rxjs__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(5121),rxjs__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(6451),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(9300),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(8505),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(8372),rxjs_operators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(1756),rxjs_operators__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(3900),rxjs_operators__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(4004),rxjs_operators__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(590),rxjs_operators__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(262),rxjs_operators__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(7414),rxjs_operators__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(5698),rxjs_operators__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(5577),fast_sha256__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1302);class DateTimeProvider{}let SystemDateTimeProvider=(()=>{class i extends DateTimeProvider{now(){return Date.now()}new(){return new Date}}return i.\u0275fac=function(){let h;return function(t){return(h||(h=_angular_core__WEBPACK_IMPORTED_MODULE_1__.n5z(i)))(t||i)}}(),i.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:i,factory:i.\u0275fac}),i})();class LoginOptions{constructor(){this.disableNonceCheck=!1,this.preventClearHashAfterLogin=!1}}class OAuthLogger{}class OAuthStorage{}let MemoryStorage=(()=>{class i{constructor(){this.data=new Map}getItem(e){return this.data.get(e)}removeItem(e){this.data.delete(e)}setItem(e,t){this.data.set(e,t)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:i,factory:i.\u0275fac}),i})();class ReceivedTokens{}class OAuthEvent{constructor(h){this.type=h}}class OAuthSuccessEvent extends OAuthEvent{constructor(h,e=null){super(h),this.info=e}}class OAuthInfoEvent extends OAuthEvent{constructor(h,e=null){super(h),this.info=e}}class OAuthErrorEvent extends OAuthEvent{constructor(h,e,t=null){super(h),this.reason=e,this.params=t}}function b64DecodeUnicode(i){const h=i.replace(/\-/g,"+").replace(/\_/g,"/");return decodeURIComponent(atob(h).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""))}function base64UrlEncode(i){return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}class AuthConfig{constructor(h){this.clientId="",this.redirectUri="",this.postLogoutRedirectUri="",this.redirectUriAsPostLogoutRedirectUriFallback=!0,this.loginUrl="",this.scope="openid profile",this.resource="",this.rngUrl="",this.oidc=!0,this.requestAccessToken=!0,this.options=null,this.issuer="",this.logoutUrl="",this.clearHashAfterLogin=!0,this.tokenEndpoint=null,this.revocationEndpoint=null,this.customTokenParameters=[],this.userinfoEndpoint=null,this.responseType="",this.showDebugInformation=!1,this.silentRefreshRedirectUri="",this.silentRefreshMessagePrefix="",this.silentRefreshShowIFrame=!1,this.siletRefreshTimeout=2e4,this.silentRefreshTimeout=2e4,this.dummyClientSecret=null,this.requireHttps="remoteOnly",this.strictDiscoveryDocumentValidation=!0,this.jwks=null,this.customQueryParams=null,this.silentRefreshIFrameName="angular-oauth-oidc-silent-refresh-iframe",this.timeoutFactor=.75,this.sessionChecksEnabled=!1,this.sessionCheckIntervall=3e3,this.sessionCheckIFrameUrl=null,this.sessionCheckIFrameName="angular-oauth-oidc-check-session-iframe",this.disableAtHashCheck=!1,this.skipSubjectCheck=!1,this.useIdTokenHintForSilentRefresh=!1,this.skipIssuerCheck=!1,this.nonceStateSeparator=";",this.useHttpBasicAuth=!1,this.waitForTokenInMsec=0,this.disablePKCE=!1,this.preserveRequestedRoute=!1,this.openUri=e=>{location.href=e},h&&Object.assign(this,h)}}class WebHttpUrlEncodingCodec{encodeKey(h){return encodeURIComponent(h)}encodeValue(h){return encodeURIComponent(h)}decodeKey(h){return decodeURIComponent(h)}decodeValue(h){return decodeURIComponent(h)}}class ValidationHandler{}class AbstractValidationHandler{validateAtHash(h){var e=this;return(0,C_Projects_am4it_drive_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__.Z)(function*(){let t=e.inferHashAlgorithm(h.idTokenHeader),s=yield e.calcHash(h.accessToken,t),c=base64UrlEncode(s.substr(0,s.length/2)),n=h.idTokenClaims.at_hash.replace(/=/g,"");return c!==n&&(console.error("exptected at_hash: "+c),console.error("actual at_hash: "+n)),c===n})()}inferHashAlgorithm(h){let e=h.alg;if(!e.match(/^.S[0-9]{3}$/))throw new Error("Algorithm not supported: "+e);return"sha-"+e.substr(2)}}let UrlHelperService=(()=>{class i{getHashFragmentParams(e){let t=e||window.location.hash;if(t=decodeURIComponent(t),0!==t.indexOf("#"))return{};const s=t.indexOf("?");return t=t.substr(s>-1?s+1:1),this.parseQueryString(t)}parseQueryString(e){const t={};let s,r,c,n,l,E,x;if(null===e)return t;s=e.split("&");for(let d=0;d<s.length;d++)r=s[d],c=r.indexOf("="),-1===c?(n=r,l=null):(n=r.substr(0,c),l=r.substr(c+1)),E=decodeURIComponent(n),x=decodeURIComponent(l),"/"===E.substr(0,1)&&(E=E.substr(1)),t[E]=x;return t}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:i,factory:i.\u0275fac}),i})();function factory(){var ERROR="input is invalid type",WINDOW="object"==typeof window,root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"==typeof self,NODE_JS=!root.JS_SHA256_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&"object"==typeof module&&module.exports,AMD="function"==typeof define&&define.amd,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u";const HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"];var blocks=[];(root.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(i){return"[object Array]"===Object.prototype.toString.call(i)}),ARRAY_BUFFER&&(root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(i){return"object"==typeof i&&i.buffer&&i.buffer.constructor===ArrayBuffer});var createOutputMethod=function(i,h){return function(e){return new Sha256(h,!0).update(e)[i]()}},createMethod=function(i){var h=createOutputMethod("hex",i);NODE_JS&&(h=nodeWrap(h,i)),h.create=function(){return new Sha256(i)},h.update=function(s){return h.create().update(s)};for(var e=0;e<OUTPUT_TYPES.length;++e){var t=OUTPUT_TYPES[e];h[t]=createOutputMethod(t,i)}return h},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(i){if("string"==typeof i)return crypto.createHash(algorithm).update(i,"utf8").digest("hex");if(null==i)throw new Error(ERROR);return i.constructor===ArrayBuffer&&(i=new Uint8Array(i)),Array.isArray(i)||ArrayBuffer.isView(i)||i.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(i)).digest("hex"):method(i)};return nodeMethod},createHmacOutputMethod=function(i,h){return function(e,t){return new HmacSha256(e,h,!0).update(t)[i]()}},createHmacMethod=function(i){var h=createHmacOutputMethod("hex",i);h.create=function(s){return new HmacSha256(s,i)},h.update=function(s,r){return h.create(s).update(r)};for(var e=0;e<OUTPUT_TYPES.length;++e){var t=OUTPUT_TYPES[e];h[t]=createHmacOutputMethod(t,i)}return h};function Sha256(i,h){h?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=i}function HmacSha256(i,h,e){var t,s=typeof i;if("string"===s){var l,r=[],c=i.length,n=0;for(t=0;t<c;++t)(l=i.charCodeAt(t))<128?r[n++]=l:l<2048?(r[n++]=192|l>>6,r[n++]=128|63&l):l<55296||l>=57344?(r[n++]=224|l>>12,r[n++]=128|l>>6&63,r[n++]=128|63&l):(l=65536+((1023&l)<<10|1023&i.charCodeAt(++t)),r[n++]=240|l>>18,r[n++]=128|l>>12&63,r[n++]=128|l>>6&63,r[n++]=128|63&l);i=r}else{if("object"!==s)throw new Error(ERROR);if(null===i)throw new Error(ERROR);if(ARRAY_BUFFER&&i.constructor===ArrayBuffer)i=new Uint8Array(i);else if(!(Array.isArray(i)||ARRAY_BUFFER&&ArrayBuffer.isView(i)))throw new Error(ERROR)}i.length>64&&(i=new Sha256(h,!0).update(i).array());var E=[],x=[];for(t=0;t<64;++t){var d=i[t]||0;E[t]=92^d,x[t]=54^d}Sha256.call(this,h,e),this.update(x),this.oKeyPad=E,this.inner=!0,this.sharedMemory=e}Sha256.prototype.update=function(i){if(!this.finalized){var h,e=typeof i;if("string"!==e){if("object"!==e)throw new Error(ERROR);if(null===i)throw new Error(ERROR);if(ARRAY_BUFFER&&i.constructor===ArrayBuffer)i=new Uint8Array(i);else if(!(Array.isArray(i)||ARRAY_BUFFER&&ArrayBuffer.isView(i)))throw new Error(ERROR);h=!0}for(var t,r,s=0,c=i.length,n=this.blocks;s<c;){if(this.hashed&&(this.hashed=!1,n[0]=this.block,n[16]=n[1]=n[2]=n[3]=n[4]=n[5]=n[6]=n[7]=n[8]=n[9]=n[10]=n[11]=n[12]=n[13]=n[14]=n[15]=0),h)for(r=this.start;s<c&&r<64;++s)n[r>>2]|=i[s]<<SHIFT[3&r++];else for(r=this.start;s<c&&r<64;++s)(t=i.charCodeAt(s))<128?n[r>>2]|=t<<SHIFT[3&r++]:t<2048?(n[r>>2]|=(192|t>>6)<<SHIFT[3&r++],n[r>>2]|=(128|63&t)<<SHIFT[3&r++]):t<55296||t>=57344?(n[r>>2]|=(224|t>>12)<<SHIFT[3&r++],n[r>>2]|=(128|t>>6&63)<<SHIFT[3&r++],n[r>>2]|=(128|63&t)<<SHIFT[3&r++]):(t=65536+((1023&t)<<10|1023&i.charCodeAt(++s)),n[r>>2]|=(240|t>>18)<<SHIFT[3&r++],n[r>>2]|=(128|t>>12&63)<<SHIFT[3&r++],n[r>>2]|=(128|t>>6&63)<<SHIFT[3&r++],n[r>>2]|=(128|63&t)<<SHIFT[3&r++]);this.lastByteIndex=r,this.bytes+=r-this.start,r>=64?(this.block=n[16],this.start=r-64,this.hash(),this.hashed=!0):this.start=r}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var i=this.blocks,h=this.lastByteIndex;i[16]=this.block,i[h>>2]|=EXTRA[3&h],this.block=i[16],h>=56&&(this.hashed||this.hash(),i[0]=this.block,i[16]=i[1]=i[2]=i[3]=i[4]=i[5]=i[6]=i[7]=i[8]=i[9]=i[10]=i[11]=i[12]=i[13]=i[14]=i[15]=0),i[14]=this.hBytes<<3|this.bytes>>>29,i[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var E,p,u,b,f,C,i=this.h0,h=this.h1,e=this.h2,t=this.h3,s=this.h4,r=this.h5,c=this.h6,n=this.h7,l=this.blocks;for(E=16;E<64;++E)l[E]=l[E-16]+(((p=l[E-15])>>>7|p<<25)^(p>>>18|p<<14)^p>>>3)+l[E-7]+(((p=l[E-2])>>>17|p<<15)^(p>>>19|p<<13)^p>>>10)<<0;for(C=h&e,E=0;E<64;E+=4)this.first?(this.is224?(u=300032,n=(p=l[0]-1413257819)-150054599<<0,t=p+24177077<<0):(u=704751109,n=(p=l[0]-210244248)-1521486534<<0,t=p+143694565<<0),this.first=!1):(n=t+(p=n+((s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7))+(s&r^~s&c)+K[E]+l[E])<<0,t=p+(((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+((u=i&h)^i&e^C))<<0),c=e+(p=c+((n>>>6|n<<26)^(n>>>11|n<<21)^(n>>>25|n<<7))+(n&s^~n&r)+K[E+1]+l[E+1])<<0,e=p+(((t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10))+((b=t&i)^t&h^u))<<0,r=h+(p=r+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))+(c&n^~c&s)+K[E+2]+l[E+2])<<0,h=p+(((e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10))+((f=e&t)^e&i^b))<<0,s=i+(p=s+((r>>>6|r<<26)^(r>>>11|r<<21)^(r>>>25|r<<7))+(r&c^~r&n)+K[E+3]+l[E+3])<<0,i=p+(((h>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10))+((C=h&e)^h&t^f))<<0;this.h0=this.h0+i<<0,this.h1=this.h1+h<<0,this.h2=this.h2+e<<0,this.h3=this.h3+t<<0,this.h4=this.h4+s<<0,this.h5=this.h5+r<<0,this.h6=this.h6+c<<0,this.h7=this.h7+n<<0},Sha256.prototype.hex=function(){this.finalize();var i=this.h0,h=this.h1,e=this.h2,t=this.h3,s=this.h4,r=this.h5,c=this.h6,n=this.h7,l=HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[15&i]+HEX_CHARS[h>>28&15]+HEX_CHARS[h>>24&15]+HEX_CHARS[h>>20&15]+HEX_CHARS[h>>16&15]+HEX_CHARS[h>>12&15]+HEX_CHARS[h>>8&15]+HEX_CHARS[h>>4&15]+HEX_CHARS[15&h]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[15&s]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[c>>28&15]+HEX_CHARS[c>>24&15]+HEX_CHARS[c>>20&15]+HEX_CHARS[c>>16&15]+HEX_CHARS[c>>12&15]+HEX_CHARS[c>>8&15]+HEX_CHARS[c>>4&15]+HEX_CHARS[15&c];return this.is224||(l+=HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]),l},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var i=this.h0,h=this.h1,e=this.h2,t=this.h3,s=this.h4,r=this.h5,c=this.h6,n=this.h7,l=[i>>24&255,i>>16&255,i>>8&255,255&i,h>>24&255,h>>16&255,h>>8&255,255&h,e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,s>>24&255,s>>16&255,s>>8&255,255&s,r>>24&255,r>>16&255,r>>8&255,255&r,c>>24&255,c>>16&255,c>>8&255,255&c];return this.is224||l.push(n>>24&255,n>>16&255,n>>8&255,255&n),l},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var i=new ArrayBuffer(this.is224?28:32),h=new DataView(i);return h.setUint32(0,this.h0),h.setUint32(4,this.h1),h.setUint32(8,this.h2),h.setUint32(12,this.h3),h.setUint32(16,this.h4),h.setUint32(20,this.h5),h.setUint32(24,this.h6),this.is224||h.setUint32(28,this.h7),i},HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var i=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(i),Sha256.prototype.finalize.call(this)}};var exports=createMethod();return exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),exports}const sha256=factory();class HashHandler{}function decodeUTF8(i){if("string"!=typeof i)throw new TypeError("expected string");var h,e=i,t=new Uint8Array(e.length);for(h=0;h<e.length;h++)t[h]=e.charCodeAt(h);return t}function encodeUTF8(i){var h,e=[];for(h=0;h<i.length;h++)e.push(String.fromCharCode(i[h]));return e.join("")}let DefaultHashHandler=(()=>{class i{calcHash(e,t){return(0,C_Projects_am4it_drive_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__.Z)(function*(){return encodeUTF8(fast_sha256__WEBPACK_IMPORTED_MODULE_0__(decodeUTF8(e)))})()}toHashString2(e){let t="";for(let s of e)t+=String.fromCharCode(s);return t}toHashString(e){const t=new Uint8Array(e);let s="";for(let r of t)s+=String.fromCharCode(r);return s}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:i,factory:i.\u0275fac}),i})(),OAuthService=(()=>{class i extends AuthConfig{constructor(e,t,s,r,c,n,l,E,x,d){super(),this.ngZone=e,this.http=t,this.config=c,this.urlHelper=n,this.logger=l,this.crypto=E,this.dateTimeService=d,this.discoveryDocumentLoaded=!1,this.state="",this.eventsSubject=new rxjs__WEBPACK_IMPORTED_MODULE_3__.x,this.discoveryDocumentLoadedSubject=new rxjs__WEBPACK_IMPORTED_MODULE_3__.x,this.grantTypesSupported=[],this.inImplicitFlow=!1,this.saveNoncesInLocalStorage=!1,this.debug("angular-oauth2-oidc v10"),this.document=x,c||(c={}),this.discoveryDocumentLoaded$=this.discoveryDocumentLoadedSubject.asObservable(),this.events=this.eventsSubject.asObservable(),r&&(this.tokenValidationHandler=r),c&&this.configure(c);try{s?this.setStorage(s):typeof sessionStorage<"u"&&this.setStorage(sessionStorage)}catch(A){console.error("No OAuthStorage provided and cannot access default (sessionStorage).Consider providing a custom OAuthStorage implementation in your module.",A)}if(this.checkLocalStorageAccessable()){const A=window?.navigator?.userAgent;(A?.includes("MSIE ")||A?.includes("Trident"))&&(this.saveNoncesInLocalStorage=!0)}this.setupRefreshTimer()}checkLocalStorageAccessable(){if(typeof window>"u")return!1;const e="test";try{return!(typeof window.localStorage>"u"||(localStorage.setItem(e,e),localStorage.removeItem(e),0))}catch{return!1}}configure(e){Object.assign(this,new AuthConfig,e),this.config=Object.assign({},new AuthConfig,e),this.sessionChecksEnabled&&this.setupSessionCheck(),this.configChanged()}configChanged(){this.setupRefreshTimer()}restartSessionChecksIfStillLoggedIn(){this.hasValidIdToken()&&this.initSessionCheck()}restartRefreshTimerIfStillLoggedIn(){this.setupExpirationTimers()}setupSessionCheck(){this.events.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.h)(e=>"token_received"===e.type)).subscribe(e=>{this.initSessionCheck()})}setupAutomaticSilentRefresh(e={},t,s=!0){let r=!0;this.clearAutomaticRefreshTimer(),this.automaticRefreshSubscription=this.events.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.b)(c=>{"token_received"===c.type?r=!0:"logout"===c.type&&(r=!1)}),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.h)(c=>"token_expires"===c.type&&(null==t||"any"===t||c.info===t)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.b)(1e3)).subscribe(c=>{r&&this.refreshInternal(e,s).catch(n=>{this.debug("Automatic silent refresh did not work")})}),this.restartRefreshTimerIfStillLoggedIn()}refreshInternal(e,t){return this.useSilentRefresh||"code"!==this.responseType?this.silentRefresh(e,t):this.refreshToken()}loadDiscoveryDocumentAndTryLogin(e=null){return this.loadDiscoveryDocument().then(t=>this.tryLogin(e))}loadDiscoveryDocumentAndLogin(e=null){return this.loadDiscoveryDocumentAndTryLogin(e=e||{}).then(t=>!(!this.hasValidIdToken()||!this.hasValidAccessToken())||(this.initLoginFlow("string"==typeof e.state?e.state:""),!1))}debug(...e){this.showDebugInformation&&this.logger.debug.apply(this.logger,e)}validateUrlFromDiscoveryDocument(e){const t=[],s=this.validateUrlForHttps(e),r=this.validateUrlAgainstIssuer(e);return s||t.push("https for all urls required. Also for urls received by discovery."),r||t.push("Every url in discovery document has to start with the issuer url.Also see property strictDiscoveryDocumentValidation."),t}validateUrlForHttps(e){if(!e)return!0;const t=e.toLowerCase();return!(!1!==this.requireHttps&&(!t.match(/^http:\/\/localhost($|[:\/])/)&&!t.match(/^http:\/\/localhost($|[:\/])/)||"remoteOnly"!==this.requireHttps))||t.startsWith("https://")}assertUrlNotNullAndCorrectProtocol(e,t){if(!e)throw new Error(`'${t}' should not be null`);if(!this.validateUrlForHttps(e))throw new Error(`'${t}' must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).`)}validateUrlAgainstIssuer(e){return!this.strictDiscoveryDocumentValidation||!e||e.toLowerCase().startsWith(this.issuer.toLowerCase())}setupRefreshTimer(){typeof window>"u"?this.debug("timer not supported on this plattform"):((this.hasValidIdToken()||this.hasValidAccessToken())&&(this.clearAccessTokenTimer(),this.clearIdTokenTimer(),this.setupExpirationTimers()),this.tokenReceivedSubscription&&this.tokenReceivedSubscription.unsubscribe(),this.tokenReceivedSubscription=this.events.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.h)(e=>"token_received"===e.type)).subscribe(e=>{this.clearAccessTokenTimer(),this.clearIdTokenTimer(),this.setupExpirationTimers()}))}setupExpirationTimers(){this.hasValidAccessToken()&&this.setupAccessTokenTimer(),this.hasValidIdToken()&&this.setupIdTokenTimer()}setupAccessTokenTimer(){const e=this.getAccessTokenExpiration(),t=this.getAccessTokenStoredAt(),s=this.calcTimeout(t,e);this.ngZone.runOutsideAngular(()=>{this.accessTokenTimeoutSubscription=(0,rxjs__WEBPACK_IMPORTED_MODULE_7__.of)(new OAuthInfoEvent("token_expires","access_token")).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.g)(s)).subscribe(r=>{this.ngZone.run(()=>{this.eventsSubject.next(r)})})})}setupIdTokenTimer(){const e=this.getIdTokenExpiration(),t=this.getIdTokenStoredAt(),s=this.calcTimeout(t,e);this.ngZone.runOutsideAngular(()=>{this.idTokenTimeoutSubscription=(0,rxjs__WEBPACK_IMPORTED_MODULE_7__.of)(new OAuthInfoEvent("token_expires","id_token")).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.g)(s)).subscribe(r=>{this.ngZone.run(()=>{this.eventsSubject.next(r)})})})}stopAutomaticRefresh(){this.clearAccessTokenTimer(),this.clearIdTokenTimer(),this.clearAutomaticRefreshTimer()}clearAccessTokenTimer(){this.accessTokenTimeoutSubscription&&this.accessTokenTimeoutSubscription.unsubscribe()}clearIdTokenTimer(){this.idTokenTimeoutSubscription&&this.idTokenTimeoutSubscription.unsubscribe()}clearAutomaticRefreshTimer(){this.automaticRefreshSubscription&&this.automaticRefreshSubscription.unsubscribe()}calcTimeout(e,t){const s=this.dateTimeService.now();return Math.max(0,(t-e)*this.timeoutFactor-(s-e))}setStorage(e){this._storage=e,this.configChanged()}loadDiscoveryDocument(e=null){return new Promise((t,s)=>{e||((e=this.issuer||"").endsWith("/")||(e+="/"),e+=".well-known/openid-configuration"),this.validateUrlForHttps(e)?this.http.get(e).subscribe(r=>{if(!this.validateDiscoveryDocument(r))return this.eventsSubject.next(new OAuthErrorEvent("discovery_document_validation_error",null)),void s("discovery_document_validation_error");this.loginUrl=r.authorization_endpoint,this.logoutUrl=r.end_session_endpoint||this.logoutUrl,this.grantTypesSupported=r.grant_types_supported,this.issuer=r.issuer,this.tokenEndpoint=r.token_endpoint,this.userinfoEndpoint=r.userinfo_endpoint||this.userinfoEndpoint,this.jwksUri=r.jwks_uri,this.sessionCheckIFrameUrl=r.check_session_iframe||this.sessionCheckIFrameUrl,this.discoveryDocumentLoaded=!0,this.discoveryDocumentLoadedSubject.next(r),this.revocationEndpoint=r.revocation_endpoint||this.revocationEndpoint,this.sessionChecksEnabled&&this.restartSessionChecksIfStillLoggedIn(),this.loadJwks().then(c=>{const l=new OAuthSuccessEvent("discovery_document_loaded",{discoveryDocument:r,jwks:c});this.eventsSubject.next(l),t(l)}).catch(c=>{this.eventsSubject.next(new OAuthErrorEvent("discovery_document_load_error",c)),s(c)})},r=>{this.logger.error("error loading discovery document",r),this.eventsSubject.next(new OAuthErrorEvent("discovery_document_load_error",r)),s(r)}):s("issuer  must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).")})}loadJwks(){return new Promise((e,t)=>{this.jwksUri?this.http.get(this.jwksUri).subscribe(s=>{this.jwks=s,this.eventsSubject.next(new OAuthSuccessEvent("discovery_document_loaded")),e(s)},s=>{this.logger.error("error loading jwks",s),this.eventsSubject.next(new OAuthErrorEvent("jwks_load_error",s)),t(s)}):e(null)})}validateDiscoveryDocument(e){let t;return this.skipIssuerCheck||e.issuer===this.issuer?(t=this.validateUrlFromDiscoveryDocument(e.authorization_endpoint),t.length>0?(this.logger.error("error validating authorization_endpoint in discovery document",t),!1):(t=this.validateUrlFromDiscoveryDocument(e.end_session_endpoint),t.length>0?(this.logger.error("error validating end_session_endpoint in discovery document",t),!1):(t=this.validateUrlFromDiscoveryDocument(e.token_endpoint),t.length>0&&this.logger.error("error validating token_endpoint in discovery document",t),t=this.validateUrlFromDiscoveryDocument(e.revocation_endpoint),t.length>0&&this.logger.error("error validating revocation_endpoint in discovery document",t),t=this.validateUrlFromDiscoveryDocument(e.userinfo_endpoint),t.length>0?(this.logger.error("error validating userinfo_endpoint in discovery document",t),!1):(t=this.validateUrlFromDiscoveryDocument(e.jwks_uri),t.length>0?(this.logger.error("error validating jwks_uri in discovery document",t),!1):(this.sessionChecksEnabled&&!e.check_session_iframe&&this.logger.warn("sessionChecksEnabled is activated but discovery document does not contain a check_session_iframe field"),!0))))):(this.logger.error("invalid issuer in discovery document","expected: "+this.issuer,"current: "+e.issuer),!1)}fetchTokenUsingPasswordFlowAndLoadUserProfile(e,t,s=new _angular_common_http__WEBPACK_IMPORTED_MODULE_9__.WM){return this.fetchTokenUsingPasswordFlow(e,t,s).then(()=>this.loadUserProfile())}loadUserProfile(){if(!this.hasValidAccessToken())throw new Error("Can not load User Profile without access_token");if(!this.validateUrlForHttps(this.userinfoEndpoint))throw new Error("userinfoEndpoint must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).");return new Promise((e,t)=>{const s=(new _angular_common_http__WEBPACK_IMPORTED_MODULE_9__.WM).set("Authorization","Bearer "+this.getAccessToken());this.http.get(this.userinfoEndpoint,{headers:s,observe:"response",responseType:"text"}).subscribe(r=>{if(this.debug("userinfo received",JSON.stringify(r)),r.headers.get("content-type").startsWith("application/json")){let c=JSON.parse(r.body);const n=this.getIdentityClaims()||{};if(!this.skipSubjectCheck&&this.oidc&&(!n.sub||c.sub!==n.sub))return void t("if property oidc is true, the received user-id (sub) has to be the user-id of the user that has logged in with oidc.\nif you are not using oidc but just oauth2 password flow set oidc to false");c=Object.assign({},n,c),this._storage.setItem("id_token_claims_obj",JSON.stringify(c)),this.eventsSubject.next(new OAuthSuccessEvent("user_profile_loaded")),e({info:c})}else this.debug("userinfo is not JSON, treating it as JWE/JWS"),this.eventsSubject.next(new OAuthSuccessEvent("user_profile_loaded")),e(JSON.parse(r.body))},r=>{this.logger.error("error loading user info",r),this.eventsSubject.next(new OAuthErrorEvent("user_profile_load_error",r)),t(r)})})}fetchTokenUsingPasswordFlow(e,t,s=new _angular_common_http__WEBPACK_IMPORTED_MODULE_9__.WM){return this.fetchTokenUsingGrant("password",{username:e,password:t},s)}fetchTokenUsingGrant(e,t,s=new _angular_common_http__WEBPACK_IMPORTED_MODULE_9__.WM){this.assertUrlNotNullAndCorrectProtocol(this.tokenEndpoint,"tokenEndpoint");let r=new _angular_common_http__WEBPACK_IMPORTED_MODULE_9__.LE({encoder:new WebHttpUrlEncodingCodec}).set("grant_type",e).set("scope",this.scope);if(this.useHttpBasicAuth){const c=btoa(`${this.clientId}:${this.dummyClientSecret}`);s=s.set("Authorization","Basic "+c)}if(this.useHttpBasicAuth||(r=r.set("client_id",this.clientId)),!this.useHttpBasicAuth&&this.dummyClientSecret&&(r=r.set("client_secret",this.dummyClientSecret)),this.customQueryParams)for(const c of Object.getOwnPropertyNames(this.customQueryParams))r=r.set(c,this.customQueryParams[c]);for(const c of Object.keys(t))r=r.set(c,t[c]);return s=s.set("Content-Type","application/x-www-form-urlencoded"),new Promise((c,n)=>{this.http.post(this.tokenEndpoint,r,{headers:s}).subscribe(l=>{this.debug("tokenResponse",l),this.storeAccessTokenResponse(l.access_token,l.refresh_token,l.expires_in||this.fallbackAccessTokenExpirationTimeInSec,l.scope,this.extractRecognizedCustomParameters(l)),this.oidc&&l.id_token&&this.processIdToken(l.id_token,l.access_token).then(E=>{this.storeIdToken(E),c(l)}),this.eventsSubject.next(new OAuthSuccessEvent("token_received")),c(l)},l=>{this.logger.error("Error performing ${grantType} flow",l),this.eventsSubject.next(new OAuthErrorEvent("token_error",l)),n(l)})})}refreshToken(){return this.assertUrlNotNullAndCorrectProtocol(this.tokenEndpoint,"tokenEndpoint"),new Promise((e,t)=>{let s=new _angular_common_http__WEBPACK_IMPORTED_MODULE_9__.LE({encoder:new WebHttpUrlEncodingCodec}).set("grant_type","refresh_token").set("scope",this.scope).set("refresh_token",this._storage.getItem("refresh_token")),r=(new _angular_common_http__WEBPACK_IMPORTED_MODULE_9__.WM).set("Content-Type","application/x-www-form-urlencoded");if(this.useHttpBasicAuth){const c=btoa(`${this.clientId}:${this.dummyClientSecret}`);r=r.set("Authorization","Basic "+c)}if(this.useHttpBasicAuth||(s=s.set("client_id",this.clientId)),!this.useHttpBasicAuth&&this.dummyClientSecret&&(s=s.set("client_secret",this.dummyClientSecret)),this.customQueryParams)for(const c of Object.getOwnPropertyNames(this.customQueryParams))s=s.set(c,this.customQueryParams[c]);this.http.post(this.tokenEndpoint,s,{headers:r}).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.w)(c=>c.id_token?(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.D)(this.processIdToken(c.id_token,c.access_token,!0)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.b)(n=>this.storeIdToken(n)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.U)(n=>c)):(0,rxjs__WEBPACK_IMPORTED_MODULE_7__.of)(c))).subscribe(c=>{this.debug("refresh tokenResponse",c),this.storeAccessTokenResponse(c.access_token,c.refresh_token,c.expires_in||this.fallbackAccessTokenExpirationTimeInSec,c.scope,this.extractRecognizedCustomParameters(c)),this.eventsSubject.next(new OAuthSuccessEvent("token_received")),this.eventsSubject.next(new OAuthSuccessEvent("token_refreshed")),e(c)},c=>{this.logger.error("Error refreshing token",c),this.eventsSubject.next(new OAuthErrorEvent("token_refresh_error",c)),t(c)})})}removeSilentRefreshEventListener(){this.silentRefreshPostMessageEventListener&&(window.removeEventListener("message",this.silentRefreshPostMessageEventListener),this.silentRefreshPostMessageEventListener=null)}setupSilentRefreshEventListener(){this.removeSilentRefreshEventListener(),this.silentRefreshPostMessageEventListener=e=>{const t=this.processMessageEventMessage(e);this.tryLogin({customHashFragment:t,preventClearHashAfterLogin:!0,customRedirectUri:this.silentRefreshRedirectUri||this.redirectUri}).catch(s=>this.debug("tryLogin during silent refresh failed",s))},window.addEventListener("message",this.silentRefreshPostMessageEventListener)}silentRefresh(e={},t=!0){const s=this.getIdentityClaims()||{};if(this.useIdTokenHintForSilentRefresh&&this.hasValidIdToken()&&(e.id_token_hint=this.getIdToken()),!this.validateUrlForHttps(this.loginUrl))throw new Error("loginUrl  must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).");if(typeof this.document>"u")throw new Error("silent refresh is not supported on this platform");const r=this.document.getElementById(this.silentRefreshIFrameName);r&&this.document.body.removeChild(r),this.silentRefreshSubject=s.sub;const c=this.document.createElement("iframe");c.id=this.silentRefreshIFrameName,this.setupSilentRefreshEventListener(),this.createLoginUrl(null,null,this.silentRefreshRedirectUri||this.redirectUri,t,e).then(d=>{c.setAttribute("src",d),this.silentRefreshShowIFrame||(c.style.display="none"),this.document.body.appendChild(c)});const l=this.events.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.h)(d=>d instanceof OAuthErrorEvent),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.P)()),E=this.events.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.h)(d=>"token_received"===d.type),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.P)()),x=(0,rxjs__WEBPACK_IMPORTED_MODULE_7__.of)(new OAuthErrorEvent("silent_refresh_timeout",null)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.g)(this.silentRefreshTimeout));return(0,rxjs__WEBPACK_IMPORTED_MODULE_14__.S)([l,E,x]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.U)(d=>{if(d instanceof OAuthErrorEvent)throw"silent_refresh_timeout"===d.type||(d=new OAuthErrorEvent("silent_refresh_error",d)),this.eventsSubject.next(d),d;return"token_received"===d.type&&(d=new OAuthSuccessEvent("silently_refreshed"),this.eventsSubject.next(d)),d})).toPromise()}initImplicitFlowInPopup(e){return this.initLoginFlowInPopup(e)}initLoginFlowInPopup(e){return e=e||{},this.createLoginUrl(null,null,this.silentRefreshRedirectUri,!1,{display:"popup"}).then(t=>new Promise((s,r)=>{let l,n=null;e.windowRef?e.windowRef&&!e.windowRef.closed&&(n=e.windowRef,n.location.href=t):n=window.open(t,"ngx-oauth2-oidc-login",this.calculatePopupFeatures(e));const E=v=>{this.tryLogin({customHashFragment:v,preventClearHashAfterLogin:!0,customRedirectUri:this.silentRefreshRedirectUri}).then(()=>{d(),s(!0)},_=>{d(),r(_)})};n?l=window.setInterval(()=>{(!n||n.closed)&&(d(),r(new OAuthErrorEvent("popup_closed",{})))},500):r(new OAuthErrorEvent("popup_blocked",{}));const d=()=>{window.clearInterval(l),window.removeEventListener("storage",p),window.removeEventListener("message",A),null!==n&&n.close(),n=null},A=v=>{const _=this.processMessageEventMessage(v);_&&null!==_?(window.removeEventListener("storage",p),E(_)):console.log("false event firing")},p=v=>{"auth_hash"===v.key&&(window.removeEventListener("message",A),E(v.newValue))};window.addEventListener("message",A),window.addEventListener("storage",p)}))}calculatePopupFeatures(e){const t=e.height||470,s=e.width||500,r=window.screenLeft+(window.outerWidth-s)/2;return`location=no,toolbar=no,width=${s},height=${t},top=${window.screenTop+(window.outerHeight-t)/2},left=${r}`}processMessageEventMessage(e){let t="#";if(this.silentRefreshMessagePrefix&&(t+=this.silentRefreshMessagePrefix),!e||!e.data||"string"!=typeof e.data)return;const s=e.data;return s.startsWith(t)?"#"+s.substr(t.length):void 0}canPerformSessionCheck(){return!(!this.sessionChecksEnabled||(this.sessionCheckIFrameUrl?this.getSessionState()?typeof this.document>"u":(console.warn("sessionChecksEnabled is activated but there is no session_state"),1):(console.warn("sessionChecksEnabled is activated but there is no sessionCheckIFrameUrl"),1)))}setupSessionCheckEventListener(){this.removeSessionCheckEventListener(),this.sessionCheckEventListener=e=>{const t=e.origin.toLowerCase(),s=this.issuer.toLowerCase();if(this.debug("sessionCheckEventListener"),s.startsWith(t)){switch(e.data){case"unchanged":this.ngZone.run(()=>{this.handleSessionUnchanged()});break;case"changed":this.ngZone.run(()=>{this.handleSessionChange()});break;case"error":this.ngZone.run(()=>{this.handleSessionError()})}this.debug("got info from session check inframe",e)}else this.debug("sessionCheckEventListener","wrong origin",t,"expected",s,"event",e)},this.ngZone.runOutsideAngular(()=>{window.addEventListener("message",this.sessionCheckEventListener)})}handleSessionUnchanged(){this.debug("session check","session unchanged"),this.eventsSubject.next(new OAuthInfoEvent("session_unchanged"))}handleSessionChange(){this.eventsSubject.next(new OAuthInfoEvent("session_changed")),this.stopSessionCheckTimer(),this.useSilentRefresh||"code"!==this.responseType?this.silentRefreshRedirectUri?(this.silentRefresh().catch(e=>this.debug("silent refresh failed after session changed")),this.waitForSilentRefreshAfterSessionChange()):(this.eventsSubject.next(new OAuthInfoEvent("session_terminated")),this.logOut(!0)):this.refreshToken().then(e=>{this.debug("token refresh after session change worked")}).catch(e=>{this.debug("token refresh did not work after session changed"),this.eventsSubject.next(new OAuthInfoEvent("session_terminated")),this.logOut(!0)})}waitForSilentRefreshAfterSessionChange(){this.events.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.h)(e=>"silently_refreshed"===e.type||"silent_refresh_timeout"===e.type||"silent_refresh_error"===e.type),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.P)()).subscribe(e=>{"silently_refreshed"!==e.type&&(this.debug("silent refresh did not work after session changed"),this.eventsSubject.next(new OAuthInfoEvent("session_terminated")),this.logOut(!0))})}handleSessionError(){this.stopSessionCheckTimer(),this.eventsSubject.next(new OAuthInfoEvent("session_error"))}removeSessionCheckEventListener(){this.sessionCheckEventListener&&(window.removeEventListener("message",this.sessionCheckEventListener),this.sessionCheckEventListener=null)}initSessionCheck(){if(!this.canPerformSessionCheck())return;const e=this.document.getElementById(this.sessionCheckIFrameName);e&&this.document.body.removeChild(e);const t=this.document.createElement("iframe");t.id=this.sessionCheckIFrameName,this.setupSessionCheckEventListener(),t.setAttribute("src",this.sessionCheckIFrameUrl),t.style.display="none",this.document.body.appendChild(t),this.startSessionCheckTimer()}startSessionCheckTimer(){this.stopSessionCheckTimer(),this.ngZone.runOutsideAngular(()=>{this.sessionCheckTimer=setInterval(this.checkSession.bind(this),this.sessionCheckIntervall)})}stopSessionCheckTimer(){this.sessionCheckTimer&&(clearInterval(this.sessionCheckTimer),this.sessionCheckTimer=null)}checkSession(){const e=this.document.getElementById(this.sessionCheckIFrameName);e||this.logger.warn("checkSession did not find iframe",this.sessionCheckIFrameName);const t=this.getSessionState();t||this.stopSessionCheckTimer(),e.contentWindow.postMessage(this.clientId+" "+t,this.issuer)}createLoginUrl(e="",t="",s="",r=!1,c={}){var n=this;return(0,C_Projects_am4it_drive_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__.Z)(function*(){const l=n;let E;E=s||n.redirectUri;const x=yield n.createAndSaveNonce();if(e=e?x+n.config.nonceStateSeparator+encodeURIComponent(e):x,!n.requestAccessToken&&!n.oidc)throw new Error("Either requestAccessToken or oidc or both must be true");n.responseType=n.config.responseType?n.config.responseType:n.oidc&&n.requestAccessToken?"id_token token":n.oidc&&!n.requestAccessToken?"id_token":"token";const d=l.loginUrl.indexOf("?")>-1?"&":"?";let A=l.scope;n.oidc&&!A.match(/(^|\s)openid($|\s)/)&&(A="openid "+A);let p=l.loginUrl+d+"response_type="+encodeURIComponent(l.responseType)+"&client_id="+encodeURIComponent(l.clientId)+"&state="+encodeURIComponent(e)+"&redirect_uri="+encodeURIComponent(E)+"&scope="+encodeURIComponent(A);if(n.responseType.includes("code")&&!n.disablePKCE){const[v,_]=yield n.createChallangeVerifierPairForPKCE();n.saveNoncesInLocalStorage&&typeof window.localStorage<"u"?localStorage.setItem("PKCE_verifier",_):n._storage.setItem("PKCE_verifier",_),p+="&code_challenge="+v,p+="&code_challenge_method=S256"}t&&(p+="&login_hint="+encodeURIComponent(t)),l.resource&&(p+="&resource="+encodeURIComponent(l.resource)),l.oidc&&(p+="&nonce="+encodeURIComponent(x)),r&&(p+="&prompt=none");for(const v of Object.keys(c))p+="&"+encodeURIComponent(v)+"="+encodeURIComponent(c[v]);if(n.customQueryParams)for(const v of Object.getOwnPropertyNames(n.customQueryParams))p+="&"+v+"="+encodeURIComponent(n.customQueryParams[v]);return p})()}initImplicitFlowInternal(e="",t=""){if(this.inImplicitFlow)return;if(this.inImplicitFlow=!0,!this.validateUrlForHttps(this.loginUrl))throw new Error("loginUrl  must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).");let s={},r=null;"string"==typeof t?r=t:"object"==typeof t&&(s=t),this.createLoginUrl(e,r,null,!1,s).then(this.config.openUri).catch(c=>{console.error("Error in initImplicitFlow",c),this.inImplicitFlow=!1})}initImplicitFlow(e="",t=""){""!==this.loginUrl?this.initImplicitFlowInternal(e,t):this.events.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.h)(s=>"discovery_document_loaded"===s.type)).subscribe(s=>this.initImplicitFlowInternal(e,t))}resetImplicitFlow(){this.inImplicitFlow=!1}callOnTokenReceivedIfExists(e){const t=this;if(e.onTokenReceived){const s={idClaims:t.getIdentityClaims(),idToken:t.getIdToken(),accessToken:t.getAccessToken(),state:t.state};e.onTokenReceived(s)}}storeAccessTokenResponse(e,t,s,r,c){if(this._storage.setItem("access_token",e),r&&!Array.isArray(r)?this._storage.setItem("granted_scopes",JSON.stringify(r.split(" "))):r&&Array.isArray(r)&&this._storage.setItem("granted_scopes",JSON.stringify(r)),this._storage.setItem("access_token_stored_at",""+this.dateTimeService.now()),s){const n=1e3*s,E=this.dateTimeService.new().getTime()+n;this._storage.setItem("expires_at",""+E)}t&&this._storage.setItem("refresh_token",t),c&&c.forEach((n,l)=>{this._storage.setItem(l,n)})}tryLogin(e=null){return"code"===this.config.responseType?this.tryLoginCodeFlow(e).then(t=>!0):this.tryLoginImplicitFlow(e)}parseQueryString(e){return e&&0!==e.length?("?"===e.charAt(0)&&(e=e.substr(1)),this.urlHelper.parseQueryString(e)):{}}tryLoginCodeFlow(e=null){var t=this;return(0,C_Projects_am4it_drive_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__.Z)(function*(){const s=(e=e||{}).customHashFragment?e.customHashFragment.substring(1):window.location.search,r=t.getCodePartsFromUrl(s),c=r.code,n=r.state,l=r.session_state;if(!e.preventClearHashAfterLogin){const d=location.origin+location.pathname+location.search.replace(/code=[^&\$]*/,"").replace(/scope=[^&\$]*/,"").replace(/state=[^&\$]*/,"").replace(/session_state=[^&\$]*/,"").replace(/^\?&/,"?").replace(/&$/,"").replace(/^\?$/,"").replace(/&+/g,"&").replace(/\?&/,"?").replace(/\?$/,"")+location.hash;history.replaceState(null,window.name,d)}let[E,x]=t.parseState(n);if(t.state=x,r.error){t.debug("error trying to login"),t.handleLoginError(e,r);const d=new OAuthErrorEvent("code_error",{},r);return t.eventsSubject.next(d),Promise.reject(d)}if(!e.disableNonceCheck){if(!E)return t.saveRequestedRoute(),Promise.resolve();if(!e.disableOAuth2StateCheck&&!t.validateNonce(E)){const A=new OAuthErrorEvent("invalid_nonce_in_state",null);return t.eventsSubject.next(A),Promise.reject(A)}return t.storeSessionState(l),c&&(yield t.getTokenFromCode(c,e),t.restoreRequestedRoute()),Promise.resolve()}return Promise.reject()})()}saveRequestedRoute(){this.config.preserveRequestedRoute&&this._storage.setItem("requested_route",window.location.pathname+window.location.search)}restoreRequestedRoute(){const e=this._storage.getItem("requested_route");e&&history.replaceState(null,"",window.location.origin+e)}getCodePartsFromUrl(e){return e&&0!==e.length?("?"===e.charAt(0)&&(e=e.substr(1)),this.urlHelper.parseQueryString(e)):this.urlHelper.getHashFragmentParams()}getTokenFromCode(e,t){let s=new _angular_common_http__WEBPACK_IMPORTED_MODULE_9__.LE({encoder:new WebHttpUrlEncodingCodec}).set("grant_type","authorization_code").set("code",e).set("redirect_uri",t.customRedirectUri||this.redirectUri);if(!this.disablePKCE){let r;r=this.saveNoncesInLocalStorage&&typeof window.localStorage<"u"?localStorage.getItem("PKCE_verifier"):this._storage.getItem("PKCE_verifier"),r?s=s.set("code_verifier",r):console.warn("No PKCE verifier found in oauth storage!")}return this.fetchAndProcessToken(s,t)}fetchAndProcessToken(e,t){t=t||{},this.assertUrlNotNullAndCorrectProtocol(this.tokenEndpoint,"tokenEndpoint");let s=(new _angular_common_http__WEBPACK_IMPORTED_MODULE_9__.WM).set("Content-Type","application/x-www-form-urlencoded");if(this.useHttpBasicAuth){const r=btoa(`${this.clientId}:${this.dummyClientSecret}`);s=s.set("Authorization","Basic "+r)}return this.useHttpBasicAuth||(e=e.set("client_id",this.clientId)),!this.useHttpBasicAuth&&this.dummyClientSecret&&(e=e.set("client_secret",this.dummyClientSecret)),new Promise((r,c)=>{if(this.customQueryParams)for(let n of Object.getOwnPropertyNames(this.customQueryParams))e=e.set(n,this.customQueryParams[n]);this.http.post(this.tokenEndpoint,e,{headers:s}).subscribe(n=>{this.debug("refresh tokenResponse",n),this.storeAccessTokenResponse(n.access_token,n.refresh_token,n.expires_in||this.fallbackAccessTokenExpirationTimeInSec,n.scope,this.extractRecognizedCustomParameters(n)),this.oidc&&n.id_token?this.processIdToken(n.id_token,n.access_token,t.disableNonceCheck).then(l=>{this.storeIdToken(l),this.eventsSubject.next(new OAuthSuccessEvent("token_received")),this.eventsSubject.next(new OAuthSuccessEvent("token_refreshed")),r(n)}).catch(l=>{this.eventsSubject.next(new OAuthErrorEvent("token_validation_error",l)),console.error("Error validating tokens"),console.error(l),c(l)}):(this.eventsSubject.next(new OAuthSuccessEvent("token_received")),this.eventsSubject.next(new OAuthSuccessEvent("token_refreshed")),r(n))},n=>{console.error("Error getting token",n),this.eventsSubject.next(new OAuthErrorEvent("token_refresh_error",n)),c(n)})})}tryLoginImplicitFlow(e=null){let t;t=(e=e||{}).customHashFragment?this.urlHelper.getHashFragmentParams(e.customHashFragment):this.urlHelper.getHashFragmentParams(),this.debug("parsed url",t);const s=t.state;let[r,c]=this.parseState(s);if(this.state=c,t.error){this.debug("error trying to login"),this.handleLoginError(e,t);const d=new OAuthErrorEvent("token_error",{},t);return this.eventsSubject.next(d),Promise.reject(d)}const n=t.access_token,l=t.id_token,E=t.session_state,x=t.scope;if(!this.requestAccessToken&&!this.oidc)return Promise.reject("Either requestAccessToken or oidc (or both) must be true.");if(this.requestAccessToken&&!n||this.requestAccessToken&&!e.disableOAuth2StateCheck&&!s||this.oidc&&!l)return Promise.resolve(!1);if(this.sessionChecksEnabled&&!E&&this.logger.warn("session checks (Session Status Change Notification) were activated in the configuration but the id_token does not contain a session_state claim"),this.requestAccessToken&&!e.disableNonceCheck&&!this.validateNonce(r)){const A=new OAuthErrorEvent("invalid_nonce_in_state",null);return this.eventsSubject.next(A),Promise.reject(A)}return this.requestAccessToken&&this.storeAccessTokenResponse(n,null,t.expires_in||this.fallbackAccessTokenExpirationTimeInSec,x),this.oidc?this.processIdToken(l,n,e.disableNonceCheck).then(d=>e.validationHandler?e.validationHandler({accessToken:n,idClaims:d.idTokenClaims,idToken:d.idToken,state:s}).then(A=>d):d).then(d=>(this.storeIdToken(d),this.storeSessionState(E),this.clearHashAfterLogin&&!e.preventClearHashAfterLogin&&this.clearLocationHash(),this.eventsSubject.next(new OAuthSuccessEvent("token_received")),this.callOnTokenReceivedIfExists(e),this.inImplicitFlow=!1,!0)).catch(d=>(this.eventsSubject.next(new OAuthErrorEvent("token_validation_error",d)),this.logger.error("Error validating tokens"),this.logger.error(d),Promise.reject(d))):(this.eventsSubject.next(new OAuthSuccessEvent("token_received")),this.clearHashAfterLogin&&!e.preventClearHashAfterLogin&&this.clearLocationHash(),this.callOnTokenReceivedIfExists(e),Promise.resolve(!0))}parseState(e){let t=e,s="";if(e){const r=e.indexOf(this.config.nonceStateSeparator);r>-1&&(t=e.substr(0,r),s=e.substr(r+this.config.nonceStateSeparator.length))}return[t,s]}validateNonce(e){let t;return t=this.saveNoncesInLocalStorage&&typeof window.localStorage<"u"?localStorage.getItem("nonce"):this._storage.getItem("nonce"),t===e||(console.error("Validating access_token failed, wrong state/nonce.",t,e),!1)}storeIdToken(e){this._storage.setItem("id_token",e.idToken),this._storage.setItem("id_token_claims_obj",e.idTokenClaimsJson),this._storage.setItem("id_token_expires_at",""+e.idTokenExpiresAt),this._storage.setItem("id_token_stored_at",""+this.dateTimeService.now())}storeSessionState(e){this._storage.setItem("session_state",e)}getSessionState(){return this._storage.getItem("session_state")}handleLoginError(e,t){e.onLoginError&&e.onLoginError(t),this.clearHashAfterLogin&&!e.preventClearHashAfterLogin&&this.clearLocationHash()}getClockSkewInMsec(e=6e5){return this.clockSkewInSec?1e3*this.clockSkewInSec:e}processIdToken(e,t,s=!1){const r=e.split("."),n=b64DecodeUnicode(this.padBase64(r[0])),l=JSON.parse(n),x=b64DecodeUnicode(this.padBase64(r[1])),d=JSON.parse(x);let A;if(A=this.saveNoncesInLocalStorage&&typeof window.localStorage<"u"?localStorage.getItem("nonce"):this._storage.getItem("nonce"),Array.isArray(d.aud)){if(d.aud.every(f=>f!==this.clientId)){const f="Wrong audience: "+d.aud.join(",");return this.logger.warn(f),Promise.reject(f)}}else if(d.aud!==this.clientId){const f="Wrong audience: "+d.aud;return this.logger.warn(f),Promise.reject(f)}if(!d.sub){const f="No sub claim in id_token";return this.logger.warn(f),Promise.reject(f)}if(this.sessionChecksEnabled&&this.silentRefreshSubject&&this.silentRefreshSubject!==d.sub){const f=`After refreshing, we got an id_token for another user (sub). Expected sub: ${this.silentRefreshSubject}, received sub: ${d.sub}`;return this.logger.warn(f),Promise.reject(f)}if(!d.iat){const f="No iat claim in id_token";return this.logger.warn(f),Promise.reject(f)}if(!this.skipIssuerCheck&&d.iss!==this.issuer){const f="Wrong issuer: "+d.iss;return this.logger.warn(f),Promise.reject(f)}if(!s&&d.nonce!==A){const f="Wrong nonce: "+d.nonce;return this.logger.warn(f),Promise.reject(f)}if(this.hasOwnProperty("responseType")&&("code"===this.responseType||"id_token"===this.responseType)&&(this.disableAtHashCheck=!0),!this.disableAtHashCheck&&this.requestAccessToken&&!d.at_hash){const f="An at_hash is needed!";return this.logger.warn(f),Promise.reject(f)}const p=this.dateTimeService.now(),v=1e3*d.iat,_=1e3*d.exp,u=this.getClockSkewInMsec();if(v-u>=p||_+u<=p){const f="Token has expired";return console.error(f),console.error({now:p,issuedAtMSec:v,expiresAtMSec:_}),Promise.reject(f)}const b={accessToken:t,idToken:e,jwks:this.jwks,idTokenClaims:d,idTokenHeader:l,loadKeys:()=>this.loadJwks()};return this.disableAtHashCheck?this.checkSignature(b).then(f=>({idToken:e,idTokenClaims:d,idTokenClaimsJson:x,idTokenHeader:l,idTokenHeaderJson:n,idTokenExpiresAt:_})):this.checkAtHash(b).then(f=>{if(!this.disableAtHashCheck&&this.requestAccessToken&&!f){const C="Wrong at_hash";return this.logger.warn(C),Promise.reject(C)}return this.checkSignature(b).then(C=>{const S={idToken:e,idTokenClaims:d,idTokenClaimsJson:x,idTokenHeader:l,idTokenHeaderJson:n,idTokenExpiresAt:_};return this.disableAtHashCheck?S:this.checkAtHash(b).then(O=>{if(this.requestAccessToken&&!O){const D="Wrong at_hash";return this.logger.warn(D),Promise.reject(D)}return S})})})}getIdentityClaims(){const e=this._storage.getItem("id_token_claims_obj");return e?JSON.parse(e):null}getGrantedScopes(){const e=this._storage.getItem("granted_scopes");return e?JSON.parse(e):null}getIdToken(){return this._storage?this._storage.getItem("id_token"):null}padBase64(e){for(;e.length%4!=0;)e+="=";return e}getAccessToken(){return this._storage?this._storage.getItem("access_token"):null}getRefreshToken(){return this._storage?this._storage.getItem("refresh_token"):null}getAccessTokenExpiration(){return this._storage.getItem("expires_at")?parseInt(this._storage.getItem("expires_at"),10):null}getAccessTokenStoredAt(){return parseInt(this._storage.getItem("access_token_stored_at"),10)}getIdTokenStoredAt(){return parseInt(this._storage.getItem("id_token_stored_at"),10)}getIdTokenExpiration(){return this._storage.getItem("id_token_expires_at")?parseInt(this._storage.getItem("id_token_expires_at"),10):null}hasValidAccessToken(){if(this.getAccessToken()){const e=this._storage.getItem("expires_at"),t=this.dateTimeService.new();return!(e&&parseInt(e,10)<t.getTime()-this.getClockSkewInMsec())}return!1}hasValidIdToken(){if(this.getIdToken()){const e=this._storage.getItem("id_token_expires_at"),t=this.dateTimeService.new();return!(e&&parseInt(e,10)<t.getTime()-this.getClockSkewInMsec())}return!1}getCustomTokenResponseProperty(e){return this._storage&&this.config.customTokenParameters&&this.config.customTokenParameters.indexOf(e)>=0&&null!==this._storage.getItem(e)?JSON.parse(this._storage.getItem(e)):null}authorizationHeader(){return"Bearer "+this.getAccessToken()}logOut(e={},t=""){let s=!1;"boolean"==typeof e&&(s=e,e={});const r=this.getIdToken();if(this._storage.removeItem("access_token"),this._storage.removeItem("id_token"),this._storage.removeItem("refresh_token"),this.saveNoncesInLocalStorage?(localStorage.removeItem("nonce"),localStorage.removeItem("PKCE_verifier")):(this._storage.removeItem("nonce"),this._storage.removeItem("PKCE_verifier")),this._storage.removeItem("expires_at"),this._storage.removeItem("id_token_claims_obj"),this._storage.removeItem("id_token_expires_at"),this._storage.removeItem("id_token_stored_at"),this._storage.removeItem("access_token_stored_at"),this._storage.removeItem("granted_scopes"),this._storage.removeItem("session_state"),this.config.customTokenParameters&&this.config.customTokenParameters.forEach(n=>this._storage.removeItem(n)),this.silentRefreshSubject=null,this.eventsSubject.next(new OAuthInfoEvent("logout")),!this.logoutUrl||s||!r&&!this.postLogoutRedirectUri)return;let c;if(!this.validateUrlForHttps(this.logoutUrl))throw new Error("logoutUrl  must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).");if(this.logoutUrl.indexOf("{{")>-1)c=this.logoutUrl.replace(/\{\{id_token\}\}/,encodeURIComponent(r)).replace(/\{\{client_id\}\}/,encodeURIComponent(this.clientId));else{let n=new _angular_common_http__WEBPACK_IMPORTED_MODULE_9__.LE({encoder:new WebHttpUrlEncodingCodec});r&&(n=n.set("id_token_hint",r));const l=this.postLogoutRedirectUri||this.redirectUriAsPostLogoutRedirectUriFallback&&this.redirectUri||"";l&&(n=n.set("post_logout_redirect_uri",l),t&&(n=n.set("state",t)));for(let E in e)n=n.set(E,e[E]);c=this.logoutUrl+(this.logoutUrl.indexOf("?")>-1?"&":"?")+n.toString()}this.config.openUri(c)}createAndSaveNonce(){const e=this;return this.createNonce().then(function(t){return e.saveNoncesInLocalStorage&&typeof window.localStorage<"u"?localStorage.setItem("nonce",t):e._storage.setItem("nonce",t),t})}ngOnDestroy(){this.clearAccessTokenTimer(),this.clearIdTokenTimer(),this.removeSilentRefreshEventListener();const e=this.document.getElementById(this.silentRefreshIFrameName);e&&e.remove(),this.stopSessionCheckTimer(),this.removeSessionCheckEventListener();const t=this.document.getElementById(this.sessionCheckIFrameName);t&&t.remove()}createNonce(){return new Promise(e=>{if(this.rngUrl)throw new Error("createNonce with rng-web-api has not been implemented so far");const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~";let s=45,r="";const c=typeof self>"u"?null:self.crypto||self.msCrypto;if(c){let n=new Uint8Array(s);c.getRandomValues(n),n.map||(n.map=Array.prototype.map),n=n.map(l=>t.charCodeAt(l%t.length)),r=String.fromCharCode.apply(null,n)}else for(;0<s--;)r+=t[Math.random()*t.length|0];e(base64UrlEncode(r))})}checkAtHash(e){var t=this;return(0,C_Projects_am4it_drive_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__.Z)(function*(){return t.tokenValidationHandler?t.tokenValidationHandler.validateAtHash(e):(t.logger.warn("No tokenValidationHandler configured. Cannot check at_hash."),!0)})()}checkSignature(e){return this.tokenValidationHandler?this.tokenValidationHandler.validateSignature(e):(this.logger.warn("No tokenValidationHandler configured. Cannot check signature."),Promise.resolve(null))}initLoginFlow(e="",t={}){return"code"===this.responseType?this.initCodeFlow(e,t):this.initImplicitFlow(e,t)}initCodeFlow(e="",t={}){""!==this.loginUrl?this.initCodeFlowInternal(e,t):this.events.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.h)(s=>"discovery_document_loaded"===s.type)).subscribe(s=>this.initCodeFlowInternal(e,t))}initCodeFlowInternal(e="",t={}){if(!this.validateUrlForHttps(this.loginUrl))throw new Error("loginUrl  must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).");let s={},r=null;"string"==typeof t?r=t:"object"==typeof t&&(s=t),this.createLoginUrl(e,r,null,!1,s).then(this.config.openUri).catch(c=>{console.error("Error in initAuthorizationCodeFlow"),console.error(c)})}createChallangeVerifierPairForPKCE(){var e=this;return(0,C_Projects_am4it_drive_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__.Z)(function*(){if(!e.crypto)throw new Error("PKCE support for code flow needs a CryptoHander. Did you import the OAuthModule using forRoot() ?");const t=yield e.createNonce();return[base64UrlEncode(yield e.crypto.calcHash(t,"sha-256")),t]})()}extractRecognizedCustomParameters(e){let t=new Map;return this.config.customTokenParameters&&this.config.customTokenParameters.forEach(s=>{e[s]&&t.set(s,JSON.stringify(e[s]))}),t}revokeTokenAndLogout(e={},t=!1){let s=this.revocationEndpoint,r=this.getAccessToken(),c=this.getRefreshToken();if(!r)return;let n=new _angular_common_http__WEBPACK_IMPORTED_MODULE_9__.LE({encoder:new WebHttpUrlEncodingCodec}),l=(new _angular_common_http__WEBPACK_IMPORTED_MODULE_9__.WM).set("Content-Type","application/x-www-form-urlencoded");if(this.useHttpBasicAuth){const E=btoa(`${this.clientId}:${this.dummyClientSecret}`);l=l.set("Authorization","Basic "+E)}if(this.useHttpBasicAuth||(n=n.set("client_id",this.clientId)),!this.useHttpBasicAuth&&this.dummyClientSecret&&(n=n.set("client_secret",this.dummyClientSecret)),this.customQueryParams)for(const E of Object.getOwnPropertyNames(this.customQueryParams))n=n.set(E,this.customQueryParams[E]);return new Promise((E,x)=>{let d,A;if(r){let p=n.set("token",r).set("token_type_hint","access_token");d=this.http.post(s,p,{headers:l})}else d=(0,rxjs__WEBPACK_IMPORTED_MODULE_7__.of)(null);if(c){let p=n.set("token",c).set("token_type_hint","refresh_token");A=this.http.post(s,p,{headers:l})}else A=(0,rxjs__WEBPACK_IMPORTED_MODULE_7__.of)(null);t&&(d=d.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.K)(p=>0===p.status?(0,rxjs__WEBPACK_IMPORTED_MODULE_7__.of)(null):(0,rxjs__WEBPACK_IMPORTED_MODULE_16__._)(p))),A=A.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.K)(p=>0===p.status?(0,rxjs__WEBPACK_IMPORTED_MODULE_7__.of)(null):(0,rxjs__WEBPACK_IMPORTED_MODULE_16__._)(p)))),(0,rxjs__WEBPACK_IMPORTED_MODULE_17__.a)([d,A]).subscribe(p=>{this.logOut(e),E(p),this.logger.info("Token successfully revoked")},p=>{this.logger.error("Error revoking token",p),this.eventsSubject.next(new OAuthErrorEvent("token_revoke_error",p)),x(p)})})}clearLocationHash(){""!=location.hash&&(location.hash="")}}return i.\u0275fac=function(e){return new(e||i)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_angular_core__WEBPACK_IMPORTED_MODULE_1__.R0b),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_angular_common_http__WEBPACK_IMPORTED_MODULE_9__.eN),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(OAuthStorage,8),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(ValidationHandler,8),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(AuthConfig,8),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(UrlHelperService),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(OAuthLogger),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(HashHandler,8),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_angular_common__WEBPACK_IMPORTED_MODULE_18__.K0),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(DateTimeProvider))},i.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:i,factory:i.\u0275fac}),i})();class OAuthModuleConfig{}class OAuthResourceServerConfig{}class OAuthResourceServerErrorHandler{}class OAuthNoopResourceServerErrorHandler{handleError(h){return(0,rxjs__WEBPACK_IMPORTED_MODULE_16__._)(h)}}let DefaultOAuthInterceptor=(()=>{class i{constructor(e,t,s){this.oAuthService=e,this.errorHandler=t,this.moduleConfig=s}checkUrl(e){return this.moduleConfig.resourceServer.customUrlValidation?this.moduleConfig.resourceServer.customUrlValidation(e):!this.moduleConfig.resourceServer.allowedUrls||!!this.moduleConfig.resourceServer.allowedUrls.find(t=>e.toLowerCase().startsWith(t.toLowerCase()))}intercept(e,t){const s=e.url.toLowerCase();return this.moduleConfig&&this.moduleConfig.resourceServer&&this.checkUrl(s)?this.moduleConfig.resourceServer.sendAccessToken?(0,rxjs__WEBPACK_IMPORTED_MODULE_19__.T)((0,rxjs__WEBPACK_IMPORTED_MODULE_7__.of)(this.oAuthService.getAccessToken()).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.h)(c=>!!c)),this.oAuthService.events.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.h)(c=>"token_received"===c.type),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.V)(this.oAuthService.waitForTokenInMsec||0),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.K)(c=>(0,rxjs__WEBPACK_IMPORTED_MODULE_7__.of)(null)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.U)(c=>this.oAuthService.getAccessToken()))).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.q)(1),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_22__.z)(c=>{if(c){const l=e.headers.set("Authorization","Bearer "+c);e=e.clone({headers:l})}return t.handle(e).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.K)(n=>this.errorHandler.handleError(n)))})):t.handle(e).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.K)(c=>this.errorHandler.handleError(c))):t.handle(e)}}return i.\u0275fac=function(e){return new(e||i)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(OAuthService),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(OAuthResourceServerErrorHandler),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(OAuthModuleConfig,8))},i.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:i,factory:i.\u0275fac}),i})();class NullValidationHandler{validateSignature(h){return Promise.resolve(null)}validateAtHash(h){return Promise.resolve(!0)}}function createDefaultLogger(){return console}function createDefaultStorage(){return typeof sessionStorage<"u"?sessionStorage:new MemoryStorage}let OAuthModule=(()=>{class i{static forRoot(e=null,t=NullValidationHandler){return{ngModule:i,providers:[OAuthService,UrlHelperService,{provide:OAuthLogger,useFactory:createDefaultLogger},{provide:OAuthStorage,useFactory:createDefaultStorage},{provide:ValidationHandler,useClass:t},{provide:HashHandler,useClass:DefaultHashHandler},{provide:OAuthResourceServerErrorHandler,useClass:OAuthNoopResourceServerErrorHandler},{provide:OAuthModuleConfig,useValue:e},{provide:_angular_common_http__WEBPACK_IMPORTED_MODULE_9__.TP,useClass:DefaultOAuthInterceptor,multi:!0},{provide:DateTimeProvider,useClass:SystemDateTimeProvider}]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_1__.oAB({type:i}),i.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_1__.cJS({imports:[[_angular_common__WEBPACK_IMPORTED_MODULE_18__.ez]]}),i})();const err="PLEASE READ THIS CAREFULLY:\n\nBeginning with angular-oauth2-oidc version 9, the JwksValidationHandler\nhas been moved to an library of its own. If you need it for implementing\nOAuth2/OIDC **implicit flow**, please install it using npm:\n\n  npm i angular-oauth2-oidc-jwks --save\n\nAfter that, you can import it into your application:\n\n  import { JwksValidationHandler } from 'angular-oauth2-oidc-jwks';\n\nPlease note, that this dependency is not needed for the **code flow**,\nwhich is nowadays the **recommented** one for single page applications.\nThis also results in smaller bundle sizes.\n";class JwksValidationHandler extends NullValidationHandler{constructor(){super(),console.error(err)}}const AUTH_CONFIG=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.OlP("AUTH_CONFIG")},5861:(i,h,e)=>{"use strict";function t(r,c,n,l,E,x,d){try{var A=r[x](d),p=A.value}catch(v){return void n(v)}A.done?c(p):Promise.resolve(p).then(l,E)}function s(r){return function(){var c=this,n=arguments;return new Promise(function(l,E){var x=r.apply(c,n);function d(p){t(x,l,E,d,A,"next",p)}function A(p){t(x,l,E,d,A,"throw",p)}d(void 0)})}}e.d(h,{Z:()=>s})}}]);